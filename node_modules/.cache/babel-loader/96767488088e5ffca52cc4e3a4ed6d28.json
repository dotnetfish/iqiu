{"remainingRequest":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/babel-loader/lib/index.js!/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/eslint-loader/index.js??ref--13-0!/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/utils/storage.js","dependencies":[{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/utils/storage.js","mtime":1595570908582},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/cache-loader/dist/cjs.js","mtime":1595570902420},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/babel-loader/lib/index.js","mtime":1595570901804},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/eslint-loader/index.js","mtime":1595570904372}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIFNUT1JBR0VfS0VZID0gImFpIjsKdmFyIGxvY2FsU3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7CgpmdW5jdGlvbiBnZXRMb2NhbERCSW5zdGFuY2UoKSB7CiAgdmFyIGRiOwoKICB0cnkgewogICAgdmFyIGxvY2FsREJTdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7CiAgICBkYiA9IEpTT04ucGFyc2UobG9jYWxEQlN0cmluZyk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoImZldGNoIGxvY2FsIGRiIGluc3RhbmNlIGZhaWwiKTsKICB9CgogIHJldHVybiBkYjsKfQoKZnVuY3Rpb24gc3luYygpIHsKICB2YXIgZGIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwoKICB0cnkgewogICAgdmFyIGxvY2FsREJTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYik7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgbG9jYWxEQlN0cmluZyk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoInBhcnNlIGxvY2FsIGRiIGZhaWwiKTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXRJdGVtKGtleSwgdmFsdWUpIHsKICB0cnkgewogICAgdmFyIGRiID0gZ2V0TG9jYWxEQkluc3RhbmNlKCkgfHwge307CiAgICBkYltrZXldID0gdmFsdWU7CiAgICBzeW5jKGRiKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigic3RvcmFnZSBzZXRJdGVtIGZhaWwiKTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUl0ZW0oa2V5KSB7CiAgdmFyIGRiID0gZ2V0TG9jYWxEQkluc3RhbmNlKCk7CiAgZGVsZXRlIGRiW2tleV07CiAgc3luYyhkYik7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEl0ZW0oa2V5KSB7CiAgdmFyIHJlc3VsdDsKCiAgdHJ5IHsKICAgIHZhciBkYiA9IGdldExvY2FsREJJbnN0YW5jZSgpOwogICAgcmVzdWx0ID0gZGJba2V5XTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5sb2coImxvY2FsIGRiIGtleSDkuI3lrZjlnKgiKTsKICB9CgogIHJldHVybiByZXN1bHQ7Cn0KZXhwb3J0IGRlZmF1bHQgewogIHNldEl0ZW06IHNldEl0ZW0sCiAgcmVtb3ZlSXRlbTogcmVtb3ZlSXRlbSwKICBnZXRJdGVtOiBnZXRJdGVtCn07"},{"version":3,"sources":["/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/utils/storage.js"],"names":["STORAGE_KEY","localStorage","window","getLocalDBInstance","db","localDBString","getItem","JSON","parse","error","console","sync","stringify","setItem","key","value","removeItem","result","log"],"mappings":"AAAA,IAAMA,WAAW,GAAG,IAApB;AACA,IAAMC,YAAY,GAAGC,MAAM,CAACD,YAA5B;;AAEA,SAASE,kBAAT,GAA8B;AAC1B,MAAIC,EAAJ;;AACA,MAAI;AACA,QAAMC,aAAa,GAAGJ,YAAY,CAACK,OAAb,CAAqBN,WAArB,CAAtB;AACAI,IAAAA,EAAE,GAAGG,IAAI,CAACC,KAAL,CAAWH,aAAX,CAAL;AACH,GAHD,CAGE,OAAOI,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAc,8BAAd;AACH;;AACD,SAAOL,EAAP;AACH;;AAED,SAASO,IAAT,GAAuB;AAAA,MAATP,EAAS,uEAAJ,EAAI;;AACnB,MAAI;AACA,QAAMC,aAAa,GAAGE,IAAI,CAACK,SAAL,CAAeR,EAAf,CAAtB;AACAH,IAAAA,YAAY,CAACY,OAAb,CAAqBb,WAArB,EAAkCK,aAAlC;AACH,GAHD,CAGE,OAAOI,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAc,qBAAd;AACH;AACJ;;AAED,OAAO,SAASI,OAAT,CAAiBC,GAAjB,EAAsBC,KAAtB,EAA6B;AAChC,MAAI;AACA,QAAMX,EAAE,GAAGD,kBAAkB,MAAM,EAAnC;AACAC,IAAAA,EAAE,CAACU,GAAD,CAAF,GAAUC,KAAV;AACAJ,IAAAA,IAAI,CAACP,EAAD,CAAJ;AACH,GAJD,CAIE,OAAOK,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAc,sBAAd;AACH;AACJ;AAED,OAAO,SAASO,UAAT,CAAoBF,GAApB,EAAyB;AAC5B,MAAMV,EAAE,GAAGD,kBAAkB,EAA7B;AACA,SAAOC,EAAE,CAACU,GAAD,CAAT;AACAH,EAAAA,IAAI,CAACP,EAAD,CAAJ;AACH;AAED,OAAO,SAASE,OAAT,CAAiBQ,GAAjB,EAAsB;AACzB,MAAIG,MAAJ;;AACA,MAAI;AACA,QAAMb,EAAE,GAAGD,kBAAkB,EAA7B;AACAc,IAAAA,MAAM,GAAGb,EAAE,CAACU,GAAD,CAAX;AACH,GAHD,CAGE,OAAOL,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACQ,GAAR,CAAY,kBAAZ;AACH;;AACD,SAAOD,MAAP;AACH;AAED,eAAe;AAAEJ,EAAAA,OAAO,EAAPA,OAAF;AAAWG,EAAAA,UAAU,EAAVA,UAAX;AAAuBV,EAAAA,OAAO,EAAPA;AAAvB,CAAf","sourcesContent":["const STORAGE_KEY = \"ai\";\nconst localStorage = window.localStorage;\n\nfunction getLocalDBInstance() {\n    let db;\n    try {\n        const localDBString = localStorage.getItem(STORAGE_KEY);\n        db = JSON.parse(localDBString);\n    } catch (error) {\n        console.error(\"fetch local db instance fail\");\n    }\n    return db;\n}\n\nfunction sync(db = {}) {\n    try {\n        const localDBString = JSON.stringify(db);\n        localStorage.setItem(STORAGE_KEY, localDBString);\n    } catch (error) {\n        console.error(\"parse local db fail\");\n    }\n}\n\nexport function setItem(key, value) {\n    try {\n        const db = getLocalDBInstance() || {};\n        db[key] = value;\n        sync(db);\n    } catch (error) {\n        console.error(\"storage setItem fail\");\n    }\n}\n\nexport function removeItem(key) {\n    const db = getLocalDBInstance();\n    delete db[key];\n    sync(db);\n}\n\nexport function getItem(key) {\n    let result;\n    try {\n        const db = getLocalDBInstance();\n        result = db[key];\n    } catch (error) {\n        console.log(\"local db key 不存在\");\n    }\n    return result;\n}\n\nexport default { setItem, removeItem, getItem };\n"]}]}