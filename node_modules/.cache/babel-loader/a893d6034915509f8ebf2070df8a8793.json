{"remainingRequest":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/babel-loader/lib/index.js!/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/components/liveroom/LiveroomGif.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/components/liveroom/LiveroomGif.vue","mtime":1595570908569},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/cache-loader/dist/cjs.js","mtime":1595570902420},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/babel-loader/lib/index.js","mtime":1595570901804},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/cache-loader/dist/cjs.js","mtime":1595570902420},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/vue-loader/lib/index.js","mtime":1595570907990}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qCioKKiDorr7orqHmgJ3ot68KKiDlj6rmmK/pu5jorqTlj5ZzaG93TGlzdOesrOS4gOS4quWxleekuiAxcwoqCiovCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTGl2ZXJvb21HaWYnLAogIHByb3BzOiB7CiAgICBnaWZ0TGlzdFRvT2JqZWN0OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICBnaWZ0SXRlbTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd2luZ0xpc3Q6IFtdLAogICAgICAvLyDlsZXnpLrkuK3nmoRnaWYKICAgICAgdGFza0xpc3Q6IFtdIC8vIOW+heWxleekuueahGdpZgoKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgLy8gZ2lmCiAgICBnaWZ0SXRlbTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbHVlKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgLy8gY29uc29sZS5sb2cob2xkVmFsdWUsICdvbGRWYWx1ZScpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld1ZhbHVlLCAnbmV3VmFsdWUnKTsKICAgICAgICBpZiAoIW5ld1ZhbHVlKSByZXR1cm47IC8vIOa3u+WKoOagh+ivhgoKICAgICAgICBuZXdWYWx1ZS52dWVLZXkgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICB2YXIgaXRlbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpKTsKICAgICAgICB0aGlzLnRhc2tMaXN0LnB1c2goaXRlbSk7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMudXBkYXRlU2hvd2luZ0xpc3QoKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICog5pu05paw5a6a5pe25ZmoCiAgICAgKiBAcGFyYW0gaXRlbSDlsZXnpLrpobkKICAgICAqIEBwYXJhbSBjYWxsQmFjawogICAgICogQHJldHVybnMge251bWJlcn0KICAgICAqLwogICAgdXBkYXRlU2V0VGltZW91dDogZnVuY3Rpb24gdXBkYXRlU2V0VGltZW91dChpdGVtLCBjYWxsQmFjaykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB0aW1lciA9IG51bGw7CiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coMTAwMCwgJ+aYvuekuuaXtumXtCcpOyAvLyDnprvlvIDliqjnlLsKCiAgICAgICAgaXRlbS5hY3RpdmUgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMyLnNob3dpbmdMaXN0LnNwbGljZSgwLCAxKTsKCiAgICAgICAgaWYgKGNhbGxCYWNrKSBjYWxsQmFjaygpOwogICAgICB9LCAyMDAwKTsgLy8g5riF6Zmk57uR5a6a55qE5a6a5pe25ZmoCgogICAgICB0aGlzLiRvbmNlKCdob29rOmJlZm9yZURlc3Ryb3knLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coImhvb2s6YmVmb3JlRGVzdHJveSIpOwogICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgIH0pOwogICAgICByZXR1cm4gdGltZXI7CiAgICB9LAogICAgLy8g5pu05paw5by55bmVCiAgICB1cGRhdGVTaG93aW5nTGlzdDogZnVuY3Rpb24gdXBkYXRlU2hvd2luZ0xpc3QoKSB7CiAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGVTaG93aW5nTGlzdC0tLS1zdGFydC1naWYnKTsKICAgICAgY29uc29sZS5sb2codGhpcy5naWZ0TGlzdFRvT2JqZWN0LCAnZ2lmdExpc3RUb09iamVjdCcpOwoKICAgICAgaWYgKHRoaXMuc2hvd2luZ0xpc3QubGVuZ3RoID09PSAwICYmIHRoaXMudGFza0xpc3QubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBpdGVtID0gdGhpcy50YXNrTGlzdC5zaGlmdCgpOyAvLyDov5vlnLrliqjnlLsKCiAgICAgICAgaXRlbS5hY3RpdmUgPSB0cnVlOyAvLyDlrprml7bnp7vpmaTmmL7npLoKCiAgICAgICAgdGhpcy50aW1lciA9IHRoaXMudXBkYXRlU2V0VGltZW91dChpdGVtLCB0aGlzLnVwZGF0ZVNob3dpbmdMaXN0KTsKICAgICAgICB0aGlzLnNob3dpbmdMaXN0LnB1c2goaXRlbSk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGVTaG93aW5nTGlzdC0tLS1lbmQtZ2lmJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["LiveroomGif.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAaA;;;;;;AAMA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,iBAAA,oBAAA;AACA,eAAA,EAAA;AACA;AAJA,KADA;AAOA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,iBAAA,oBAAA;AACA,eAAA,EAAA;AACA;AAJA;AAPA,GAFA;AAgBA,EAAA,IAhBA,kBAgBA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AACA;AACA,MAAA,QAAA,EAAA,EAFA,CAEA;;AAFA,KAAA;AAIA,GArBA;AAsBA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,OAAA,EAAA,iBAAA,QAAA,EAAA;AAAA;;AACA;AACA;AACA,YAAA,CAAA,QAAA,EAAA,OAHA,CAIA;;AACA,QAAA,QAAA,CAAA,MAAA,GAAA,IAAA,IAAA,GAAA,OAAA,EAAA;AAEA,YAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA,CAAA;AACA,aAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,aAAA,SAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,iBAAA;AACA,SAFA;AAGA,OAbA;AAcA,MAAA,SAAA,EAAA;AAdA;AAFA,GAtBA;AAyCA,EAAA,OAzCA,qBAyCA,CACA,CA1CA;AA2CA,EAAA,OAAA,EAAA;AACA;;;;;;AAMA,IAAA,gBAPA,4BAOA,IAPA,EAOA,QAPA,EAOA;AAAA;;AACA,UAAA,KAAA,GAAA,IAAA;AACA,MAAA,KAAA,GAAA,UAAA,CAAA,YAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EAAA,MAAA,EADA,CAEA;;AACA,QAAA,IAAA,CAAA,MAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,WAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;;AAEA,YAAA,QAAA,EAAA,QAAA;AACA,OAPA,EAOA,IAPA,CAAA,CAFA,CAWA;;AACA,WAAA,KAAA,CAAA,oBAAA,EAAA,YAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,oBAAA;AACA,QAAA,YAAA,CAAA,KAAA,CAAA;AACA,OAHA;AAIA,aAAA,KAAA;AACA,KAxBA;AAyBA;AACA,IAAA,iBA1BA,+BA0BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gCAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,gBAAA,EAAA,kBAAA;;AACA,UAAA,KAAA,WAAA,CAAA,MAAA,KAAA,CAAA,IAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,QAAA,CAAA,KAAA,EAAA,CADA,CAEA;;AACA,QAAA,IAAA,CAAA,MAAA,GAAA,IAAA,CAHA,CAIA;;AACA,aAAA,KAAA,GAAA,KAAA,gBAAA,CAAA,IAAA,EAAA,KAAA,iBAAA,CAAA;AACA,aAAA,WAAA,CAAA,IAAA,CAAA,IAAA;AACA;;AAEA,MAAA,OAAA,CAAA,GAAA,CAAA,8BAAA;AACA;AAvCA;AA3CA,CAAA","sourcesContent":["<template>\n\n  <div class=\"live-gif\" v-show=\"showingList.length>0\">\n    <transition-group name=\"zoom-in\" appear>\n      <div class=\"gif-item\" v-for=\"(item) in showingList\" :key=\"item.vueKey\">\n        <img v-if=\"item.active && giftListToObject[item.gift.id]\" class=\"gif-logo\" :src=\"giftListToObject[item.gift.id].animationUrl\" alt=\"\">\n      </div>\n    </transition-group>\n  </div>\n\n</template>\n\n<script>\n  /*\n *\n * 设计思路\n * 只是默认取showList第一个展示 1s\n *\n */\n  export default {\n    name: 'LiveroomGif',\n    props: {\n      giftListToObject: {\n        type: Object,\n        default: () => {\n          return {}\n        }\n      },\n      giftItem: {\n        type: Object,\n        default: () => {\n          return {}\n        }\n      }\n    },\n    data() {\n      return {\n        showingList: [], // 展示中的gif\n        taskList: [] // 待展示的gif\n      }\n    },\n    watch: {\n      // gif\n      giftItem: {\n        handler: function (newValue) {\n          // console.log(oldValue, 'oldValue');\n          // console.log(newValue, 'newValue');\n          if (!newValue) return;\n          // 添加标识\n          newValue.vueKey = new Date().getTime()\n\n          let item = JSON.parse(JSON.stringify(newValue));\n          this.taskList.push(item)\n          this.$nextTick(() => {\n            this.updateShowingList()\n          })\n        },\n        immediate: false\n      },\n    },\n    mounted() {\n    },\n    methods: {\n      /**\n       * 更新定时器\n       * @param item 展示项\n       * @param callBack\n       * @returns {number}\n       */\n      updateSetTimeout(item, callBack) {\n        let timer = null;\n        timer = setTimeout(() => {\n          console.log(1000, '显示时间');\n// 离开动画\n          item.active = false;\n          this.showingList.splice(0, 1)\n\n          if (callBack) callBack()\n        }, 2000)\n\n        // 清除绑定的定时器\n        this.$once('hook:beforeDestroy', () => {\n          console.log(\"hook:beforeDestroy\");\n          clearTimeout(timer);\n        })\n        return timer;\n      },\n      // 更新弹幕\n      updateShowingList() {\n        console.log('updateShowingList----start-gif');\n        console.log(this.giftListToObject,'giftListToObject');\n        if (this.showingList.length === 0 && this.taskList.length > 0) {\n          const item = this.taskList.shift()\n          // 进场动画\n          item.active = true;\n          // 定时移除显示\n          this.timer = this.updateSetTimeout(item, this.updateShowingList)\n          this.showingList.push(item);\n        }\n\n        console.log('updateShowingList----end-gif');\n      },\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"@/assets/css/_index.scss\";\n\n  .live-gif {\n    position: absolute;\n    z-index: 25;\n    top: 54px;\n    left: 55px;\n    width: 260px;\n    height: 260px;\n\n    .gif-logo {\n      position: absolute;\n      width: 260px;\n      height: 260px;\n    }\n  }\n\n</style>\n"],"sourceRoot":"src/components/liveroom"}]}