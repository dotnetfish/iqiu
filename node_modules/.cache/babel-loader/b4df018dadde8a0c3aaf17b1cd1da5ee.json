{"remainingRequest":"D:\\pc\\iqiu\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\iqiu\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\pc\\iqiu\\src\\utils\\storage.js","dependencies":[{"path":"D:\\pc\\iqiu\\src\\utils\\storage.js","mtime":1594000643104},{"path":"D:\\pc\\iqiu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593501341354},{"path":"D:\\pc\\iqiu\\node_modules\\babel-loader\\lib\\index.js","mtime":1593501344079},{"path":"D:\\pc\\iqiu\\node_modules\\eslint-loader\\index.js","mtime":1593501432660}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIFNUT1JBR0VfS0VZID0gImFpIjsKdmFyIGxvY2FsU3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7CgpmdW5jdGlvbiBnZXRMb2NhbERCSW5zdGFuY2UoKSB7CiAgdmFyIGRiOwoKICB0cnkgewogICAgdmFyIGxvY2FsREJTdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7CiAgICBkYiA9IEpTT04ucGFyc2UobG9jYWxEQlN0cmluZyk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoImZldGNoIGxvY2FsIGRiIGluc3RhbmNlIGZhaWwiKTsKICB9CgogIHJldHVybiBkYjsKfQoKZnVuY3Rpb24gc3luYygpIHsKICB2YXIgZGIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwoKICB0cnkgewogICAgdmFyIGxvY2FsREJTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYik7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgbG9jYWxEQlN0cmluZyk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoInBhcnNlIGxvY2FsIGRiIGZhaWwiKTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXRJdGVtKGtleSwgdmFsdWUpIHsKICB0cnkgewogICAgdmFyIGRiID0gZ2V0TG9jYWxEQkluc3RhbmNlKCkgfHwge307CiAgICBkYltrZXldID0gdmFsdWU7CiAgICBzeW5jKGRiKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigic3RvcmFnZSBzZXRJdGVtIGZhaWwiKTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUl0ZW0oa2V5KSB7CiAgdmFyIGRiID0gZ2V0TG9jYWxEQkluc3RhbmNlKCk7CiAgZGVsZXRlIGRiW2tleV07CiAgc3luYyhkYik7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEl0ZW0oa2V5KSB7CiAgdmFyIHJlc3VsdDsKCiAgdHJ5IHsKICAgIHZhciBkYiA9IGdldExvY2FsREJJbnN0YW5jZSgpOwogICAgcmVzdWx0ID0gZGJba2V5XTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5sb2coImxvY2FsIGRiIGtleSDkuI3lrZjlnKgiKTsKICB9CgogIHJldHVybiByZXN1bHQ7Cn0KZXhwb3J0IGRlZmF1bHQgewogIHNldEl0ZW06IHNldEl0ZW0sCiAgcmVtb3ZlSXRlbTogcmVtb3ZlSXRlbSwKICBnZXRJdGVtOiBnZXRJdGVtCn07"},{"version":3,"sources":["D:/pc/iqiu/src/utils/storage.js"],"names":["STORAGE_KEY","localStorage","window","getLocalDBInstance","db","localDBString","getItem","JSON","parse","error","console","sync","stringify","setItem","key","value","removeItem","result","log"],"mappings":"AAAA,IAAMA,WAAW,GAAG,IAApB;AACA,IAAMC,YAAY,GAAGC,MAAM,CAACD,YAA5B;;AAEA,SAASE,kBAAT,GAA8B;AAC1B,MAAIC,EAAJ;;AACA,MAAI;AACA,QAAMC,aAAa,GAAGJ,YAAY,CAACK,OAAb,CAAqBN,WAArB,CAAtB;AACAI,IAAAA,EAAE,GAAGG,IAAI,CAACC,KAAL,CAAWH,aAAX,CAAL;AACH,GAHD,CAGE,OAAOI,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAc,8BAAd;AACH;;AACD,SAAOL,EAAP;AACH;;AAED,SAASO,IAAT,GAAuB;AAAA,MAATP,EAAS,uEAAJ,EAAI;;AACnB,MAAI;AACA,QAAMC,aAAa,GAAGE,IAAI,CAACK,SAAL,CAAeR,EAAf,CAAtB;AACAH,IAAAA,YAAY,CAACY,OAAb,CAAqBb,WAArB,EAAkCK,aAAlC;AACH,GAHD,CAGE,OAAOI,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAc,qBAAd;AACH;AACJ;;AAED,OAAO,SAASI,OAAT,CAAiBC,GAAjB,EAAsBC,KAAtB,EAA6B;AAChC,MAAI;AACA,QAAMX,EAAE,GAAGD,kBAAkB,MAAM,EAAnC;AACAC,IAAAA,EAAE,CAACU,GAAD,CAAF,GAAUC,KAAV;AACAJ,IAAAA,IAAI,CAACP,EAAD,CAAJ;AACH,GAJD,CAIE,OAAOK,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAc,sBAAd;AACH;AACJ;AAED,OAAO,SAASO,UAAT,CAAoBF,GAApB,EAAyB;AAC5B,MAAMV,EAAE,GAAGD,kBAAkB,EAA7B;AACA,SAAOC,EAAE,CAACU,GAAD,CAAT;AACAH,EAAAA,IAAI,CAACP,EAAD,CAAJ;AACH;AAED,OAAO,SAASE,OAAT,CAAiBQ,GAAjB,EAAsB;AACzB,MAAIG,MAAJ;;AACA,MAAI;AACA,QAAMb,EAAE,GAAGD,kBAAkB,EAA7B;AACAc,IAAAA,MAAM,GAAGb,EAAE,CAACU,GAAD,CAAX;AACH,GAHD,CAGE,OAAOL,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACQ,GAAR,CAAY,kBAAZ;AACH;;AACD,SAAOD,MAAP;AACH;AAED,eAAe;AAAEJ,EAAAA,OAAO,EAAPA,OAAF;AAAWG,EAAAA,UAAU,EAAVA,UAAX;AAAuBV,EAAAA,OAAO,EAAPA;AAAvB,CAAf","sourcesContent":["const STORAGE_KEY = \"ai\";\r\nconst localStorage = window.localStorage;\r\n\r\nfunction getLocalDBInstance() {\r\n    let db;\r\n    try {\r\n        const localDBString = localStorage.getItem(STORAGE_KEY);\r\n        db = JSON.parse(localDBString);\r\n    } catch (error) {\r\n        console.error(\"fetch local db instance fail\");\r\n    }\r\n    return db;\r\n}\r\n\r\nfunction sync(db = {}) {\r\n    try {\r\n        const localDBString = JSON.stringify(db);\r\n        localStorage.setItem(STORAGE_KEY, localDBString);\r\n    } catch (error) {\r\n        console.error(\"parse local db fail\");\r\n    }\r\n}\r\n\r\nexport function setItem(key, value) {\r\n    try {\r\n        const db = getLocalDBInstance() || {};\r\n        db[key] = value;\r\n        sync(db);\r\n    } catch (error) {\r\n        console.error(\"storage setItem fail\");\r\n    }\r\n}\r\n\r\nexport function removeItem(key) {\r\n    const db = getLocalDBInstance();\r\n    delete db[key];\r\n    sync(db);\r\n}\r\n\r\nexport function getItem(key) {\r\n    let result;\r\n    try {\r\n        const db = getLocalDBInstance();\r\n        result = db[key];\r\n    } catch (error) {\r\n        console.log(\"local db key 不存在\");\r\n    }\r\n    return result;\r\n}\r\n\r\nexport default { setItem, removeItem, getItem };\r\n"]}]}