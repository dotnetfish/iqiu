{"remainingRequest":"D:\\pc\\iqiu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\iqiu\\src\\views\\Liveroom.vue?vue&type=style&index=0&id=d9919afe&lang=scss&scoped=true&","dependencies":[{"path":"D:\\pc\\iqiu\\src\\views\\Liveroom.vue","mtime":1594000643105},{"path":"D:\\pc\\iqiu\\node_modules\\css-loader\\dist\\cjs.js","mtime":1593501447640},{"path":"D:\\pc\\iqiu\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1593501453075},{"path":"D:\\pc\\iqiu\\node_modules\\postcss-loader\\src\\index.js","mtime":1593501448238},{"path":"D:\\pc\\iqiu\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1593501529409},{"path":"D:\\pc\\iqiu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593501341354},{"path":"D:\\pc\\iqiu\\node_modules\\vue-loader\\lib\\index.js","mtime":1593501453075}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICJAL2Fzc2V0cy9jc3MvX2luZGV4LnNjc3MiOwoKLnZpZGVvLXBsYXllciB7CiAgLypwb3NpdGlvbjogYWJzb2x1dGU7Ki8KICAvKndpZHRoOiAxMDAlOyovCiAgLypoZWlnaHQ6MTAwJTsqLwp9CgoudG9wTmF2IHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgei1pbmRleDogJHotaW5kZXgxOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIG1pbi13aWR0aDogOTQ4cHg7CiAgcGFkZGluZy1sZWZ0OiAyNDBweDsKICAvLyB0cmFuc2l0aW9uOiBhbGwgMC41czsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwp9CgoubWFpbi1oZWFkZXIgewogIHBvc2l0aW9uOiBmaXhlZDsKICB6LWluZGV4OiAyMTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKCiAgOjp2LWRlZXAuaG9tZS1uYXYgewogICAgLyp3aWR0aDogY2FsYygxMDAlIC0gNDgwcHgpOyovCiAgICAvKm1hcmdpbjogMCAyNDBweDsqLwogICAgLypib3gtc2l6aW5nOmJvcmRlci1ib3g7Ki8KICB9Cn0KCi5tYWluLWNvbnRhaW5lciB7CiAgcGFkZGluZy1sZWZ0OiAyNDBweDsKCiAgJi5mb2xkIHsKICAgIHBhZGRpbmctbGVmdDogNDhweDsKICB9Cn0KCi5saXZlcm9vbSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHBhZGRpbmctdG9wOiA2MHB4OwogIHBhZGRpbmctcmlnaHQ6IDM3MHB4OwoKICBiYWNrZ3JvdW5kLWNvbG9yOiAkYmctbWFpbjsKICBAZXh0ZW5kICVjbGVhcmZpeDsKfQoKLm1haW4td3JhcCB7CiAgbWFyZ2luOiAyMHB4IDIwcHggMjBweCAzNXB4OwogIG1pbi13aWR0aDogNTM1cHg7Cn0KCi5jaGF0LXdyYXAgewogIHBvc2l0aW9uOiBmaXhlZDsKICB6LWluZGV4OiAzOwogIHJpZ2h0OiAwOwogIHRvcDogODBweDsKICBvdmVyZmxvdzogaGlkZGVuOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgd2lkdGg6IDM3MHB4OwogIGhlaWdodDogMTAwJTsKCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKCiAgYm9yZGVyOiAxcHggc29saWQgJGNvbG9yLWJvcmRlcjsKICBib3JkZXItdG9wOiAwcHggc29saWQgJGNvbG9yLWJvcmRlcjsKICBib3JkZXItcmlnaHQ6IDBweCBzb2xpZCAkY29sb3ItYm9yZGVyOwp9CgouZW1wdHkgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAvKmhlaWdodDogMzUwcHg7Ki8KICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjOwogIC8vIGhhY2sg5pu05pS55by55bmV5a6a5L2N5pa55byPIOS/neivgeinhumikeWcqOaWh+aho+a1geWGhQogICYgPiA6OnYtZGVlcCBkaXY6bm90KDpvbmx5LWNoaWxkKTpsYXN0LW9mLXR5cGUgewogICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7CiAgICB6LWluZGV4OiAxOSAhaW1wb3J0YW50OwogICAgdG9wOiAwICFpbXBvcnRhbnQ7CiAgICAvKmJhY2tncm91bmQtY29sb3I6IHJlZCFpbXBvcnRhbnQ7Ki8KICB9Cn0K"},{"version":3,"sources":["Liveroom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0uBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Liveroom.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <section>\r\n    <loginPop ref=\"login\" @successLogin=\"init\"></loginPop>\r\n    <div\r\n      :class=\"[{ fold: isFold }, 'main-header']\"\r\n    >\r\n      <homeNav  :navLogo=\"true\"></homeNav>\r\n<!--      <homeNav :navLogo=\"false\"></homeNav>-->\r\n    </div>\r\n    <div class=\"liveroom\" :class=\"[{ fold: isFold }, 'main-container']\">\r\n      <LeftSideBar @changeFoldState=\"getFoldState\"></LeftSideBar>\r\n      <div class=\"main-wrap\">\r\n        <LiveroomHeader\r\n          :channelInfo=\"channelInfo\"\r\n          v-bind:follow.sync=\"userInfo.follow\"\r\n          @login=\"login\"\r\n          @updateChannelInfo=\"getChannelInfo\"\r\n        ></LiveroomHeader>\r\n\r\n        <div class=\"empty\" ref=\"danmaku\" id=\"danmaku\">\r\n          <videoPlayer\r\n            ref=\"dPlayer\"\r\n            :roomId=\"liveroom\"\r\n            :notLivingSuggest=\"recommendVideo2\"\r\n          ></videoPlayer>\r\n<!--          <LiveroomPaodao :messageItem=\"messageItem\"></LiveroomPaodao>-->\r\n        </div>\r\n        <LiveroomGift\r\n          :userLogin=\"userLogin\"\r\n          :channelInfo=\"channelInfo\"\r\n          :giftList=\"giftList\"\r\n          @sendGiftSuccess=\"sendGiftSuccess\"\r\n          @login=\"login\"\r\n        ></LiveroomGift>\r\n        <LiveroomRecommend\r\n          ref=\"recommend\"\r\n          :recommendList=\"recommendList\"\r\n        ></LiveroomRecommend>\r\n      </div>\r\n      <div class=\"chat-wrap\">\r\n        <liveroomNotice :msg=\"channelInfo.notice\"></liveroomNotice>\r\n<!--        <liveroomRank :rankObject=\"rankObject\"></liveroomRank>-->\r\n        <liveroomChat\r\n          :giftListToObject=\"giftListToObject\"\r\n          :hongbaoList=\"hongbaoList\"\r\n          :userLogin=\"userLogin\"\r\n          :msgList=\"msgList\"\r\n          :giftItem=\"giftItem\"\r\n          :userInfo=\"userInfo\"\r\n          @login=\"login\"\r\n          @hongBaoSuccess=\"getloginInfo\"\r\n        ></liveroomChat>\r\n        <liveroomInput\r\n          :userInfo=\"userInfo\"\r\n          @sendMsg=\"sendMsg\"\r\n          @login=\"login\"\r\n        ></liveroomInput>\r\n        <LiveroomLoginDialog @login=\"login\"></LiveroomLoginDialog>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\n  import LiveroomHeader from \"@/components/liveroom/LiveroomHeader\";\r\n  import LiveroomGift from \"@/components/liveroom/LiveroomGift\";\r\n  import liveroomNotice from \"@/components/liveroom/LiveroomNotice\";\r\n  // import liveroomRank from \"@/components/liveroom/LiveroomRank\";\r\n  import liveroomInput from \"@/components/liveroom/LiveroomInput\";\r\n  import liveroomChat from \"@/components/liveroom/LiveroomChat\";\r\n  // import LiveroomPaodao from \"@/components/liveroom/LiveroomPaodao\";\r\n  import LiveroomLoginDialog from \"@/components/liveroom/LiveroomLoginDialog\";\r\n  import LiveroomRecommend from \"@/components/liveroom/LiveroomRecommend\";\r\n\r\n  import LeftSideBar from \"@/components/left-side-bar.vue\";\r\n  import homeNav from \"@/views/home/homeNav.vue\";\r\n  import loginPop from \"@/components/login/loginTipPopup.vue\";\r\n  import videoPlayer from \"@/components/video/videoPlayer.vue\";\r\n\r\n  import { md5Secret } from \"@/utils/md5.js\";\r\n  import * as Chat from \"@/utils/chat.js\";\r\n  import { event } from \"@/utils/leancloud.js\";\r\n  import {\r\n    queryRoomRanking,\r\n    channelInfo,\r\n    enterRoom,\r\n    getGiftList,\r\n    loginInfo\r\n  } from \"@/api/liveroom\";\r\n  import { recommendLiveList } from \"@/api/api\";\r\n\r\n  import { debounce } from \"@/utils/debounceAndthrottle\";\r\n  // import Cookies from 'js-cookie';\r\n  import Danmaku from \"danmaku\";\r\n  import { v4 as uuidv4 } from 'uuid';\r\n\r\n  export default {\r\n    name: \"LiveRoom\",\r\n    components: {\r\n      LiveroomHeader,\r\n      LiveroomGift,\r\n      liveroomChat,\r\n      // LiveroomPaodao,\r\n      liveroomNotice,\r\n      // liveroomRank,\r\n      LiveroomLoginDialog,\r\n      liveroomInput,\r\n      LiveroomRecommend,\r\n      LeftSideBar,\r\n      homeNav,\r\n      loginPop,\r\n      videoPlayer\r\n    },\r\n    data() {\r\n      return {\r\n        isFold: true,\r\n        userLogin: {\r\n          // \"id\": \"6806129\",\r\n          // \"token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJ4LXp5LXVzZXItaWQiOiI2ODA2MTI5IiwiaXNzIjoiemhhbmd5dSIsImV4cCI6MTU3OTUxOTY0MiwiaWF0IjoxNTc4MzEwMDQyfQ.VU2NbKftvSJTRe1tTcXtRoWW4UnGg36gGGbHq3KgSBfhDLNjptkLsYPNyhsU_lpaZJ97Hq4LnA8Q8ThgPmAtnQ\",\r\n          // \"mobile\": \"184****6272\",\r\n          // \"uname\": \"足球精英\",\r\n          // \"status\": 0,\r\n          // \"avatarUrl\": \"https://pic.imifan.live/avatar/2019121013081813608091574583384.jpg\",\r\n          // \"accountDto\": {\r\n          //   \"_id\": \"13183057850163215\",\r\n          //   \"uid\": \"6806129\",\r\n          //   \"cashAccount\": {\r\n          //     \"totalBalance\": 9011,\r\n          //     \"balance\": 9011,\r\n          //     \"frzBalance\": 0,\r\n          //     \"totalRecharge\": 12000,\r\n          //     \"totalWithdrawal\": 10000\r\n          //   },\r\n          //   \"salaryAccount\": {\r\n          //     \"totalBalance\": 6000,\r\n          //     \"balance\": 5000,\r\n          //     \"frzBalance\": 1000,\r\n          //     \"totalRecharge\": 0,\r\n          //     \"totalWithdrawal\": 0\r\n          //   },\r\n          //   \"cashAssets\": 8011,\r\n          //   \"miCoin\": {\r\n          //     \"balance\": 379898800,\r\n          //     \"totalExpend\": 1099998,\r\n          //     \"totalRecharge\": 1099998\r\n          //   },\r\n          //   \"cashTotalRecharge\": 1111998,\r\n          //   \"cashTotalWithdrawal\": 10000\r\n          // },\r\n          // \"isAnchor\": true,\r\n          // \"favorite\": 1,\r\n          // \"wxBindStatus\": \"BIND\",\r\n          // \"wxName\": \"mimo\",\r\n          // \"canEditUname\": true,\r\n          // \"logOutStatus\": \"INAUDIT\"\r\n        },\r\n        liveroom: \"\",\r\n        channelInfo: {}, // 主播信息\r\n        userInfo: {\r\n          channelRoleType: 0,\r\n          follow: false,\r\n          forbid: false,\r\n          forbidEndTime: null\r\n        }, // 用户在当前直播间信息\r\n        giftList: [], // 礼物列表\r\n        giftListToObject: {}, // 礼物列表\r\n        hongbaoList: [], // 红包列表\r\n        recommendList: [], // 推荐列表\r\n        recommendVideo2: [], // 未开播推荐列表\r\n        rankObject: {},\r\n        messageItem: {},\r\n        giftItem: {\r\n          // \"gift\": {\r\n          //   \"anchorId\": \"6919164\",\r\n          //   \"anchorName\": \"冯曦妤\",\r\n          //   \"id\": 12915206930636802,\r\n          //   \"name\": \"浪味仙\",\r\n          //   \"number\": 1,\r\n          //   \"picture\": \"https://pic.imifan.live/gifts/langXianXian/2019101819283913031452620677141.png\",\r\n          //   \"showGift\": true,\r\n          //   \"totalFee\": 10\r\n          // },\r\n          // \"pType\": 0,\r\n          // \"pid\": \"6919164\",\r\n          // \"sign\": \"286403A393C275046C3053CA7EBE4ADD\",\r\n          // \"user\": {\r\n          //   \"avatar\": \"https://pic.imifan.live/avatar/2019103119455113183057850163209.png\",\r\n          //   \"id\": \"3486074\",\r\n          //   \"name\": \"晨曦吻月\"\r\n          // }\r\n        },\r\n        msgList: [\r\n          // 四种角色发送弹幕\r\n          // {\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000004\",\"user\":{\"role\":0,\"name\":\"春暖花开567\",\"id\":\"10000004\"}},\"_lctype\":-1,\"_lctext\":\"主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1\"},\r\n          // {\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000157\",\"user\":{\"role\":1,\"name\":\"春暖花开567\",\"id\":\"3506329\"}},\"_lctype\":-1,\"_lctext\":\"主播早1\"},\r\n          // {\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000157\",\"user\":{\"role\":2,\"name\":\"春暖花开567\",\"id\":\"3506329\"}},\"_lctype\":-1,\"_lctext\":\"主播早2\"},\r\n          // {\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000157\",\"user\":{\"role\":9,\"name\":\"春暖花开567\",\"id\":\"3506329\"}},\"_lctype\":-1,\"_lctext\":\"主播早3\"},\r\n          // {\"_lcattrs\":{\"gift\":{\"anchorId\":\"6336335\",\"anchorName\":\"老牛解说\",\"id\":12915206930636801,\"name\":\"饭团\",\"number\":1,\"picture\":\"https://pic.imifan.live/gifts/riceBall/2019101819132913031452620677128.png\",\"showGift\":true,\"totalFee\":10},\"pType\":0,\"pid\":\"6336335\",\"sign\":\"F5AE7BF879696F2ECE83AADD2359E229\",\"user\":{\"avatar\":\"https://pic.imifan.live/avatar/2019111210320013250427765727273.jpg\",\"id\":\"6741398\",\"name\":\"凉白开\"}},\"_lctext\":\"12915206930636801\",\"_lctype\":2}, {\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000157\",\"user\":{\"role\":0,\"name\":\"春暖花开567\",\"id\":\"3506329\"}},\"_lctype\":-1,\"_lctext\":\"主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1主播早1\"},\r\n          // {\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000157\",\"user\":{\"role\":1,\"name\":\"春暖花开567\",\"id\":\"3506329\"}},\"_lctype\":-1,\"_lctext\":\"主播早1\"},\r\n          // {\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000157\",\"user\":{\"role\":2,\"name\":\"春暖花开567\",\"id\":\"3506329\"}},\"_lctype\":-1,\"_lctext\":\"主播早2\"},\r\n          // {\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000157\",\"user\":{\"role\":9,\"name\":\"春暖花开567\",\"id\":\"3506329\"}},\"_lctype\":-1,\"_lctext\":\"主播早3\"},\r\n          // {\"_lcattrs\":{\"gift\":{\"anchorId\":\"6336335\",\"anchorName\":\"老牛解说\",\"id\":12915206930636801,\"name\":\"饭团\",\"number\":1,\"picture\":\"https://pic.imifan.live/gifts/riceBall/2019101819132913031452620677128.png\",\"showGift\":true,\"totalFee\":10},\"pType\":0,\"pid\":\"6336335\",\"sign\":\"F5AE7BF879696F2ECE83AADD2359E229\",\"user\":{\"avatar\":\"https://pic.imifan.live/avatar/2019111210320013250427765727273.jpg\",\"id\":\"6741398\",\"name\":\"凉白开\"}},\"_lctext\":\"12915206930636801\",\"_lctype\":2},\r\n          // {\r\n          //   \"_lctype\": 1,\r\n          //   \"_lctext\": \"小飞机关注了这个主播\",\r\n          //   \"_lcattrs\": {\r\n          //     \"user\": { \"id\": \"20032019\", \"name\": \"晨曦吻月\", \"role\": 9, \"avatar\": \"xxxxxx\" },\r\n          //     \"sm\": { \"type\": 0 },\r\n          //     \"gift\": { \"id\": 83743784138, \"number\": 12, \"totalFee\": 1200, \"anchorId\": \"726265\" },\r\n          //     \"rw\": { \"type\": 0, \"level\": 0, \"isJump\": 0 },\r\n          //     \"pType\": 0,\r\n          //     \"pid\": \"126712676\"\r\n          //   }\r\n          // },\r\n          // {\r\n          //   \"_lctype\": 1,\r\n          //   \"_lctext\": \"公告\",\r\n          //   \"_lcattrs\": {\r\n          //     \"user\": { \"id\": \"20032019\", \"name\": \"晨曦吻月\", \"role\": 9, \"avatar\": \"xxxxxx\" },\r\n          //     \"sm\": { \"type\": 1 },\r\n          //     \"gift\": { \"id\": 83743784138, \"number\": 12, \"totalFee\": 1200, \"anchorId\": \"726265\" },\r\n          //     \"rw\": { \"type\": 0, \"level\": 0, \"isJump\": 0 },\r\n          //     \"pType\": 0,\r\n          //     \"pid\": \"126712676\"\r\n          //   }\r\n          // },\r\n          // {\r\n          //   \"_lctype\": 5,\r\n          //   \"_lctext\": \"ban\",\r\n          //   \"_lcattrs\": {\r\n          //     \"user\": { \"id\": \"20032019\", \"name\": \"晨曦吻月\", \"role\": 9, \"avatar\": \"xxxxxx\" },\r\n          //     \"sm\": { \"type\": 0 },\r\n          //     \"gift\": { \"id\": 83743784138, \"number\": 12, \"totalFee\": 1200, \"anchorId\": \"726265\" },\r\n          //     \"rw\": { \"type\": 0, \"level\": 0, \"isJump\": 0 },\r\n          //     \"pType\": 0,\r\n          //     \"pid\": \"126712676\"\r\n          //   }\r\n          // },\r\n          // {\r\n          //   \"_lctype\": 1,\r\n          //   \"_lctext\": \"小飞机关注了这个主播\",\r\n          //   \"_lcattrs\": {\r\n          //     \"user\": { \"id\": \"20032019\", \"name\": \"晨曦吻月\", \"role\": 9, \"avatar\": \"xxxxxx\" },\r\n          //     \"sm\": { \"type\": 0 },\r\n          //     \"gift\": { \"id\": 83743784138, \"number\": 12, \"totalFee\": 1200, \"anchorId\": \"726265\" },\r\n          //     \"rw\": { \"type\": 0, \"level\": 0, \"isJump\": 0 },\r\n          //     \"pType\": 0,\r\n          //     \"pid\": \"126712676\"\r\n          //   }\r\n          // }\r\n        ], // 弹幕列表\r\n        danmaku: null // 视频弹幕\r\n      };\r\n    },\r\n    computed: {\r\n      isLogin() {\r\n        return this.$store.getters.isLogin;\r\n      },\r\n      topNavStyleObj() {\r\n        if (this.isFold) {\r\n          return {\r\n            paddingLeft: `48px`,\r\n            width: `calc(100% - 48px)`,\r\n            minWidth: \"1132px\"\r\n          };\r\n        } else {\r\n          return {\r\n            paddingLeft: `240px`,\r\n            width: `calc(100% - 240px)`,\r\n            minWidth: \"948px\"\r\n          };\r\n        }\r\n      },\r\n      userStatus: {\r\n        get () {\r\n          return this.$store.state.userStatus\r\n        },\r\n        set(val){\r\n          this.$store.commit('updateUserStatus', val)\r\n        }\r\n      },\r\n    },\r\n    watch: {\r\n      $route() {\r\n        // 对路由变化作出响应\r\n        this.init();\r\n      },\r\n      // isLogin(value) {\r\n      //   // 监听登陆成功 组件暴露功能 暂未使用\r\n      //   if(value) this.init()\r\n      // }\r\n    },\r\n\r\n    created() {\r\n      // let sign = \"123*5\";\r\n      // let md5string = \"12345\";\r\n      //\r\n      // if (sign.indexOf(\"*\") > -1) {\r\n      //   console.log((sign = sign.split(\"*\")[0]), \"sign.split('*')[0]\");\r\n      //   console.log((md5string = md5string.slice(0, sign.length)), \"md5string\");\r\n      // }\r\n      // console.log(md5string === sign);\r\n      // document.cookie = 'xx-user-token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJ4LXp5LXVzZXItaWQiOiIzNDg2MDc0IiwiaXNzIjoiemhhbmd5dSIsImV4cCI6MTU3OTE1NDcyOCwiaWF0IjoxNTc3OTQ1MTI4fQ.fdWr8bgcExT3a7Qr8k-AMEF142FqK09RtqMWAHc4TECvJA7V_gD2F8v7UMsJKhbAspgWdN84byJfh3IALkg70w'\r\n      // Cookies.set('xx-user-token','eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJ4LXp5LXVzZXItaWQiOiIzNDg2MDc0IiwiaXNzIjoiemhhbmd5dSIsImV4cCI6MTU3OTE1NDcyOCwiaWF0IjoxNTc3OTQ1MTI4fQ.fdWr8bgcExT3a7Qr8k-AMEF142FqK09RtqMWAHc4TECvJA7V_gD2F8v7UMsJKhbAspgWdN84byJfh3IALkg70w')\r\n      this.init();\r\n      // setTimeout(() => {\r\n      //   this.msgList.push({\r\n      //     name: 111,\r\n      //     content: 222222\r\n      //   })\r\n      // },3000)\r\n\r\n      // test chatroom\r\n      // let index = 1;\r\n      // setInterval(() => {\r\n      //   console.log('msgList push');\r\n      //   this.msgList.push({\r\n      //     name: 111,\r\n      //     content: 222222+ index\r\n      //   })\r\n      //   index++\r\n      // },3000)\r\n\r\n      // test 礼物横幅\r\n      // let i = 1;\r\n      // let timer = setInterval(() => {\r\n      //   if (i == 10) clearInterval(timer);\r\n      //   this.giftItem = {\r\n      //     \"gift\": {\r\n      //       \"anchorId\": \"6919164\",\r\n      //       \"anchorName\": \"冯曦妤\",\r\n      //       \"id\": 12915206930636802,\r\n      //       \"name\": \"浪味仙\",\r\n      //       \"number\": 1,\r\n      //       \"picture\": \"https://pic.imifan.live/gifts/langXianXian/2019101819283913031452620677141.png\",\r\n      //       \"showGift\": true,\r\n      //       \"totalFee\": 10 * i\r\n      //     },\r\n      //     \"pType\": 0,\r\n      //     \"pid\": \"6919164\",\r\n      //     \"sign\": \"286403A393C275046C3053CA7EBE4ADD\",\r\n      //     \"user\": {\r\n      //       \"avatar\": \"https://pic.imifan.live/avatar/2019103119455113183057850163209.png\",\r\n      //       \"id\": \"3486074\",\r\n      //       \"name\": \"晨曦吻月\"\r\n      //     }\r\n      //   }\r\n      //   i++\r\n      //\r\n      //   console.log('setTimeout-----------------------');\r\n      //   this.getRank();\r\n      //\r\n      // }, 1000)\r\n\r\n      // test 跑道\r\n      // let i = 1;\r\n      // let timer = setInterval(() => {\r\n      //   if (i == 3) clearInterval(timer);\r\n      //   this.msgList.push({\"_lcattrs\":{\"gift\":{\"anchorId\":\"10007878\",\"anchorName\":\"小饭粒_10007878\",\"id\":\"12915206930636816\",\"name\":\"满汉全席\",\"number\":1,\"picture\":\"https://pic.imifan.live/gifts/manchu/2019101819301813031452620677143.png\",\"showGift\":true,\"totalFee\":200000},\"pType\":0,\"pid\":\"10007878\",\"sign\":\"B575A0DA78F8AB6A0A20D4D1546C8279\",\"user\":{\"avatar\":\"https://pic.imifan.live/avatar/2020011612283314054534902399033.jpg\",\"id\":\"6782355\",\"name\":\"fred\"}},\"_lctext\":\"12915206930636816\",\"_lctype\":2})\r\n      // this.messageItem = {\r\n      //   \"_lcattrs\": {\r\n      //     \"pType\": 1,\r\n      //     \"rw\": {\r\n      //       \"anchorId\": \"6144444\",\r\n      //       \"anchorName\": \"不朽少年梦\",\r\n      //       \"duration\": 10000,\r\n      //       \"isJump\": 1,\r\n      //       \"level\": 0,\r\n      //       \"name\": \"糖果庄园\",\r\n      //       \"number\": 2,\r\n      //       \"picture\": \"https://pic.imifan.live/gifts/fruitCastle/2019101819410313031452620677151.png\",\r\n      //       \"times\": 3,\r\n      //       \"type\": 1\r\n      //     },\r\n      //     \"sign\": \"64C3A3E27B5DB6DAFE1F3C46B6D9FEAE\",\r\n      //     \"user\": {\r\n      //       \"avatar\": \"https://pic.imifan.live/avatar/2019103119455113183057850163209.png\",\r\n      //       \"id\": \"3486074\",\r\n      //       \"name\": \"晨曦吻月\"\r\n      //     }\r\n      //   }, \"_lctext\": \"晨曦吻月赠送给主播不朽少年梦 2 个 糖果庄园！快来围观吧!\", \"_lctype\": 4\r\n      // }\r\n      //   i++\r\n      //\r\n      //   console.log('setTimeout');\r\n      //\r\n      // }, 1000)\r\n\r\n      // 封禁测试\r\n      // setTimeout(() => {\r\n      //   this.userInfo= {\r\n      //     channelRoleType: 2,\r\n      //     follow: false,\r\n      //     forbid: true,\r\n      //     forbidEndTime: 1577963587139\r\n      //   };\r\n      // },3000)\r\n\r\n      // 红包 测试\r\n      // this.hongbaoList.push({\"_lcattrs\":{\"pType\":0,\"sign\":\"37D9109E305705375A2960BEB3000222\",\"lcuid\":\"CHAT_USER_3506329\",\"pid\":\"10000157\",\"rp\":{\"time\":5000,\"id\":\"3506329\"}},\"_lctype\":3,\"_lctext\":\"主播早\"})\r\n    },\r\n\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n        this.DanmakuInit();\r\n      });\r\n    },\r\n    destroyed() {\r\n      // 移除弹幕和resize监听\r\n      this.danmaku.destroy();\r\n      window.removeEventListener(\"resize\", this.danmakuResize);\r\n    },\r\n    methods: {\r\n      getFoldState() {\r\n        // let leftFoldState = window.sessionStorage.getItem(\"leftFoldState\");\r\n        // this.isFold =\r\n        //   leftFoldState === null || leftFoldState === \"false\" ? false : true;\r\n        this.$nextTick(() => {\r\n          this.$refs.recommend.init();\r\n        });\r\n      },\r\n      DanmakuInit() {\r\n        this.danmaku = new Danmaku({\r\n          // 用于显示弹幕的「舞台」会被添加到该容器中\r\n          container: this.$refs.danmaku,\r\n          // container: this.$refs.dPlayer,\r\n          // container: document.querySelector('#danmaku'),\r\n          // container: document.querySelector('.video-player'),\r\n          // video: document.querySelector('.dplayer-video'),\r\n\r\n          // 弹幕数据数组，在 emit API 中会说明其格式\r\n          comments: [],\r\n\r\n          // 支持 DOM 引擎和 canvas 引擎。canvas 引擎一般比 DOM 更高效，但相对更耗内存。\r\n          // 默认为 DOM 引擎\r\n          // engine: 'canvas',\r\n\r\n          // 弹幕速度，也可以用 speed API 设置\r\n          speed: 105\r\n        });\r\n\r\n        // setInterval(() => {\r\n        //   this.danmaku.emit(comment);\r\n        // },200)\r\n        this.danmakuResize();\r\n        window.addEventListener(\"resize\", this.danmakuResize);\r\n      },\r\n      danmakuResize: debounce(\r\n        function () {\r\n          console.log(this.danmaku);\r\n          this.danmaku.resize();\r\n        },\r\n        200,\r\n        false\r\n      ),\r\n      /**\r\n       * 飘窗弹幕自己的type 对应三种字体\r\n       * 展示的消息类型：\r\n       * -1用户发送的消息、 #ffffff\r\n       * 1欢迎消息、关注消息、#FFC955\r\n       * 2抢红包消息 #FF7F64\r\n       * @param message\r\n       * @param type\r\n       */\r\n      sendDanmaku(message, type) {\r\n        let colorMap = {\r\n          \"-1\": \"#ffffff\",\r\n          1: \"#FFC955\",\r\n          2: \"#FF7F64\"\r\n        };\r\n        let comment = {\r\n          text: message,\r\n\r\n          // 默认为 rtl（从右到左），支持 ltr、rtl、top、bottom。\r\n          mode: \"rtl\",\r\n\r\n          // 在使用 DOM 引擎时，Danmaku 会为每一条弹幕创建一个 <div> 节点，\r\n          // 以下 CSS 样式会直接设置到 div.style 上\r\n          style: {\r\n            // top: '30px',\r\n            zIndex: 10,\r\n            fontSize: \"24px\",\r\n            fontWeight: \"700\",\r\n            opacity: \"0.84\",\r\n            lineHeight: \"33px\",\r\n            color: colorMap[type],\r\n            padding: \"4px 0\",\r\n            textShadow: \"1px 0px 1px rgba(34,34,34,1)\"\r\n          }\r\n\r\n          // 自定义渲染器\r\n          // 当 `render` 字段存在时, `text`, `html`, `style` 和 `canvasStyle` 将被忽略。\r\n\r\n          // 在使用 DOM 引擎时，该函数应当返回一个 HTMLElement。\r\n          // render: function() {\r\n          // var $div = document.createElement('div');\r\n          // var $img = document.createElement('img');\r\n          // $img.src = '/path/to/xxx.png';\r\n          // $div.appendChild($img);\r\n          // return $div;\r\n          // },\r\n          // 在使用 canvas 引擎时，该函数应当返回一个 HTMLCanvasElement。\r\n          // render: function() {\r\n          //   var canvas = document.createElement('canvas');\r\n          //   canvas.width = 320;\r\n          //   canvas.height = 180;\r\n          //   var ctx = canvas.getContext('2d');\r\n          //   ctx.beginPath();\r\n          //   ctx.arc(75, 75, 50, 0, 2 * Math.PI);\r\n          //   ctx.stroke();\r\n          //   return canvas;\r\n          // }\r\n        };\r\n        this.danmaku.emit(comment);\r\n      },\r\n      init() {\r\n        // 左侧边栏当前状态\r\n        // this.getFoldState();\r\n\r\n        this.liveroom = this.$route.params.liveroom;\r\n\r\n        this.getChannelInfo().then(() => {\r\n          this.connetConversation();\r\n          this.getrecommendLiveList();\r\n        });\r\n        this.getGiftList();\r\n        // this.getRanking();\r\n        this.getloginInfo();\r\n        this.enterRoom();\r\n      },\r\n      sendGiftSuccess(data) {\r\n        this.$set(this.userLogin,'credit', data.credit);\r\n      },\r\n      // 获取直播间信息\r\n      getloginInfo() {\r\n        if (!this.isLogin) return;\r\n        return loginInfo().then(res => {\r\n          this.userLogin = res.data;\r\n          // this.userStatus.userInfo.balance = res.data.accountDto.miCoin.balance\r\n          // console.log('this.userStatus.userInfo.balance',this.userStatus.userInfo.balance)\r\n          console.log('直播间-个人信息',res);\r\n        });\r\n      },\r\n      // 当前用户进入直播间的信息\r\n      enterRoom() {\r\n        // if (!this.isLogin) return;\r\n        return enterRoom({ cid: this.liveroom }).then(res => {\r\n          this.userInfo = res.data;\r\n          console.log(res);\r\n        });\r\n      },\r\n      // 获取直播间信息\r\n      getChannelInfo() {\r\n        return channelInfo({ cid: this.liveroom }).then(res => {\r\n          this.channelInfo = res.data;\r\n          document.title = this.channelInfo.name;\r\n          console.log(res);\r\n        });\r\n      },\r\n      // 获取推荐列表\r\n      getrecommendLiveList() {\r\n        return recommendLiveList(\r\n          {\r\n            recommendAnchorType: \"SEARCH_PAGE\"\r\n            // size: 10,\r\n          },\r\n          {}\r\n        ).then(res => {\r\n          // 未开播\r\n          if (this.channelInfo.playStatusCode == 905) {\r\n            this.recommendVideo2 = res.data.slice(0, 2);\r\n            this.recommendList = res.data.slice(2);\r\n          } else {\r\n            this.recommendList = res.data;\r\n          }\r\n          console.log(res);\r\n        });\r\n      },\r\n      // 礼物列表\r\n      getGiftList() {\r\n        return getGiftList().then(res => {\r\n          this.giftList = res.data;\r\n          // this.giftList = [res.data[0],res.data[0],res.data[0],res.data[0],res.data[0],res.data[0],res.data[0],res.data[0]];\r\n\r\n          res.data.forEach(item => {\r\n            this.$set(this.giftListToObject, item.id, item);\r\n          });\r\n          console.log(res);\r\n        });\r\n      },\r\n      // 榜单\r\n      getRanking() {\r\n        return queryRoomRanking({ anchorId: this.liveroom, type: 0 }).then(\r\n          res => {\r\n            this.rankObject = res.data;\r\n          }\r\n        );\r\n      },\r\n      // 节流处理 更新榜单\r\n      getRank: debounce(\r\n        function () {\r\n          this.getRanking();\r\n        },\r\n        1000,\r\n        false\r\n      ),\r\n      // 弹幕初始化\r\n      connetConversation() {\r\n        console.log('链接聊天室-用户信息',this.userStatus)\r\n        let clientId = 'CHAT_VISITOR_' + uuidv4()\r\n        if(this.isLogin){\r\n          clientId = 'CHAT_USER_' + this.userStatus.userInfo.uid\r\n        }\r\n        console.log('链接聊天室clientId',clientId)\r\n        Chat.getChatRoom(clientId, this.channelInfo.chatRooms[0]).then(  // test--加入签名\r\n          conversation => {\r\n            console.log(conversation, \"conversation\");\r\n            this.msgList.push({\r\n              _lctype: 1,\r\n              // _lctext: `欢迎来到秘饭直播${ this.channelInfo.uname }的直播间，监播人员将对直播间进行24小时巡查，禁止传播任何违法、违规、低俗、暴力等不良信息的行为。`\r\n              _lctext: `爱球禁止未成年人送礼等付费行为、严禁主播诱导未成年人消费。如直播间出现违法违规、色情低俗、赌博、诱导欺诈等行为，请及时举报。管理员24小时在线巡查并接受举报。`\r\n            });\r\n            // this.sendDanmaku(`欢迎来到秘饭直播${ this.channelInfo.uname }的直播间，直播间依法对直播内容进行24小时巡查，禁止任何传播违章、违规、低俗、暴力等不良信息的行为。`, 1)\r\n            try {\r\n              // 正常交互\r\n              conversation.on(event.MESSAGE, message => {\r\n                console.log('event.MESSAGE',event.MESSAGE)\r\n                console.log('message',message)\r\n                console.log('message.content',message.content)\r\n                console.log(\r\n                  message.content,\r\n                  \"contentcontentcontentcontentcontent\"\r\n                );\r\n                console.log(\r\n                  message.content._lctext,\r\n                  \"messagemessagemessagemessagemessage\"\r\n                );\r\n                this.assignedMessage(message.content);\r\n              });\r\n              // // 弹出提示，告知当前用户的 clientId 在其他设备上登录了\r\n              conversation.on(event.CONFLICT, function () {\r\n                // TODO 互踢啦\r\n                console.log(\"互踢啦\");\r\n              });\r\n            } catch {\r\n              console.log(\"弹幕服务器加载失败\");\r\n            }\r\n          }\r\n        );\r\n      },\r\n      // 分配弹幕返回数据\r\n      assignedMessage(message) {\r\n        let text = message._lctext;\r\n        let type = message._lctype;\r\n        let md5String = md5Secret(text);\r\n        let sign = message._lcattrs.sign;\r\n        /**\r\n         * 因为加密的字符串含有leanCloud的屏蔽词, 会被转化为*, 所以各个客户端需要增加以下逻辑\r\n         * 第一步: 判断字符串中是否包含*: 不包含直接对比\r\n         * 第二步: 如果包含*, 则判断*是否为第一个, 如果是第一个则不进行对比,直接展示\r\n         * 第三步: 如果不是第一个则切割字符串, 获取*前面的部分, 然后和本地截取相同长度然后在进行对比\r\n         */\r\n        if (sign.indexOf(\"*\") > -1) {\r\n          sign = sign.split(\"*\")[0];\r\n          md5String = md5String.slice(0, sign.length);\r\n\r\n          console.log(sign, \"sign\");\r\n          console.log(md5String, \"md5string\");\r\n        }\r\n        console.log(md5String === sign, 'md5String === sign');\r\n        if (md5String === sign && md5String !== \"false\") {\r\n          console.log(\"receive message:\" + text);\r\n          // 弹幕文案\r\n          if (type === -1 || type === 1 || type === 2 || type === 5) {\r\n            this.msgList.push(JSON.parse(JSON.stringify(message)));\r\n          }\r\n          // 飘窗弹幕\r\n          if (type === -1) {\r\n            this.sendDanmaku(text, \"-1\");\r\n          }\r\n          if (type === 1) {\r\n            this.sendDanmaku(text, message._lcattrs.sm === 0 ? 2 : 1);\r\n          }\r\n          // 禁言 判断的是不是当前登陆用户\r\n          if (type === 5 && message._lcattrs.fb.uid === this.userLogin.id) {\r\n            this.enterRoom();\r\n          }\r\n          // 设置房管 判断的是不是当前登陆用户\r\n          if (type === 6 && message._lcattrs.manager.id === this.userLogin.id) {\r\n            this.enterRoom();\r\n          }\r\n          // 礼物\r\n          if (type === 2) {\r\n            this.giftItem = JSON.parse(JSON.stringify(message._lcattrs));\r\n            // this.getRank();\r\n          }\r\n          // 红包\r\n          if (type === 3) {\r\n            this.hongbaoList.push(JSON.parse(JSON.stringify(message)));\r\n          }\r\n          // 跑道\r\n          if (type === 4) {\r\n            this.messageItem = JSON.parse(JSON.stringify(message));\r\n          }\r\n        }\r\n      },\r\n      // 发送消息\r\n      sendMsg(msg) {\r\n        console.log(msg, \"sendMsg\");\r\n        let sign = md5Secret(msg);\r\n        let params = {\r\n          user: {\r\n            id: this.userLogin.id,\r\n            name: this.userLogin.uname,\r\n            role: this.userInfo.channelRoleType,\r\n            avatar: this.userLogin.avatarUrl\r\n          },\r\n          pType: 0,\r\n          pid: this.liveroom,\r\n          lcuid: `CHAT_USER_${ this.userLogin.id }`,\r\n          sign\r\n        };\r\n        Chat.sendMsg(msg, params).then(() => {\r\n          console.log(\"success\");\r\n          this.msgList.push({\r\n            _lcattrs: {\r\n              user: {\r\n                role: this.userInfo.channelRoleType,\r\n                name: this.userLogin.uname,\r\n                id: this.userLogin.id,\r\n                avatar: this.userLogin.avatarUrl\r\n              }\r\n            },\r\n            _lctype: -1,\r\n            _lctext: msg\r\n          });\r\n          this.sendDanmaku(msg, \"-1\");\r\n        });\r\n      },\r\n      login() {\r\n        // 展示登陆弹窗\r\n        this.$refs.login.openLoginDialog();\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  @import \"@/assets/css/_index.scss\";\r\n\r\n  .video-player {\r\n    /*position: absolute;*/\r\n    /*width: 100%;*/\r\n    /*height:100%;*/\r\n  }\r\n\r\n  .topNav {\r\n    position: fixed;\r\n    z-index: $z-index1;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    min-width: 948px;\r\n    padding-left: 240px;\r\n    // transition: all 0.5s;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .main-header {\r\n    position: fixed;\r\n    z-index: 21;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n\r\n    ::v-deep.home-nav {\r\n      /*width: calc(100% - 480px);*/\r\n      /*margin: 0 240px;*/\r\n      /*box-sizing:border-box;*/\r\n    }\r\n  }\r\n\r\n  .main-container {\r\n    padding-left: 240px;\r\n\r\n    &.fold {\r\n      padding-left: 48px;\r\n    }\r\n  }\r\n\r\n  .liveroom {\r\n    position: relative;\r\n    padding-top: 60px;\r\n    padding-right: 370px;\r\n\r\n    background-color: $bg-main;\r\n    @extend %clearfix;\r\n  }\r\n\r\n  .main-wrap {\r\n    margin: 20px 20px 20px 35px;\r\n    min-width: 535px;\r\n  }\r\n\r\n  .chat-wrap {\r\n    position: fixed;\r\n    z-index: 3;\r\n    right: 0;\r\n    top: 80px;\r\n    overflow: hidden;\r\n    border-radius: 10px;\r\n    width: 370px;\r\n    height: 100%;\r\n\r\n    background-color: #fff;\r\n\r\n    border: 1px solid $color-border;\r\n    border-top: 0px solid $color-border;\r\n    border-right: 0px solid $color-border;\r\n  }\r\n\r\n  .empty {\r\n    position: relative;\r\n    /*height: 350px;*/\r\n    background-color: #ccc;\r\n    // hack 更改弹幕定位方式 保证视频在文档流内\r\n    & > ::v-deep div:not(:only-child):last-of-type {\r\n      position: absolute !important;\r\n      z-index: 19 !important;\r\n      top: 0 !important;\r\n      /*background-color: red!important;*/\r\n    }\r\n  }\r\n</style>\r\n"]}]}