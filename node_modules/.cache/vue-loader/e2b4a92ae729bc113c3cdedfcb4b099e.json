{"remainingRequest":"D:\\pc\\iqiu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\iqiu\\src\\views\\search-result.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\pc\\iqiu\\src\\views\\search-result.vue","mtime":1594000643110},{"path":"D:\\pc\\iqiu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593501341354},{"path":"D:\\pc\\iqiu\\node_modules\\babel-loader\\lib\\index.js","mtime":1593501344079},{"path":"D:\\pc\\iqiu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593501341354},{"path":"D:\\pc\\iqiu\\node_modules\\vue-loader\\lib\\index.js","mtime":1593501453075}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwppbXBvcnQgTGl2ZUxpc3RJdGVtIGZyb20gJ0AvY29tcG9uZW50cy9saXZlLWxpc3QtaXRlbS52dWUnCmltcG9ydCBhbmNob3JMaXN0SXRlbSBmcm9tICdAL2NvbXBvbmVudHMvYW5jaG9yLWxpc3QtaXRlbS52dWUnCmltcG9ydCAqIGFzIGFwaSBmcm9tICJAL2FwaS9hcGkiOwppbXBvcnQgeyBUYWJzLCBUYWJQYW5lIH0gZnJvbSAnZWxlbWVudC11aSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NlYXJjaFJlc3VsdCcsCiAgY29tcG9uZW50czogewogICAgW1RhYnMubmFtZV06IFRhYnMsCiAgICBbVGFiUGFuZS5uYW1lXTogVGFiUGFuZSwKICAgIExpdmVMaXN0SXRlbSwKICAgIGFuY2hvckxpc3RJdGVtCiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2U6IDAsCiAgICAgIGZyb206ICcnLAogICAgICBrZXl3b3JkOiAnJywKICAgICAgYWN0aXZlTmFtZTogJ2ZpcnN0JywKICAgICAgdHlwZU5hbWU6ICfmkJzntKLnu5PmnpwnLAogICAgICB0eXBlSWQ6ICdhbGwnLAogICAgICBsb2FkVHh0OiAnfuWKquWKm+WKoOi9veS4rS4uLicsCiAgICAgIHNjcm9sbEZsYWc6IGZhbHNlLAogICAgICBub0RhdGFGbGFnOiBmYWxzZSwKICAgICAgaXNEYXRhU2hvdzogMSwKICAgICAgaXNOb0RhdGE6IDAsCiAgICAgIGlzTW9yZTogMCwKICAgICAgYWxsU2VhcmNoUmVzdWx0OiBbXSwKICAgICAgYWxsTGl2ZUxpc3Q6IFtdLAogICAgICBhbGxBbmNob3JMaXN0OiBbXSwKICAgICAgcmVjb21tZW5kTGl2ZUxpc3Q6IFtdLAogICAgICBpc0ZvbGQ6IGZhbHNlCiAgICB9CiAgfSwKICBwcm9wczogewogICAgICBnZXRpc0ZvbGQ6IHsKICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIC8vIGNvbnNvbGUubG9nKCfmkJzntKLnu5PmnpwnKQogICAgdGhpcy5nZXRGb2xkU3RhdGUoKTsKICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0KCk7CiAgICB0aGlzLmdldFJlY29tbWVuZExpdmVMaXN0KCk7CiAgfSwKICBtb3VudGVkICgpIHsKICB9LAogIGRlc3Ryb3llZCAoKSB7CiAgfSwKICB3YXRjaDp7CiAgICAnJHJvdXRlJzoncm91dGVDaGFuZ2UnLAogICAgZ2V0aXNGb2xkICh2YWwpIHsKICAgICAgICB0aGlzLmlzRm9sZCA9IHZhbDsKICAgICAgICAvLyBjb25zb2xlLmxvZyg5OTkpCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZ2V0TGl2ZUl0ZW1XICgpIHsKICAgICAgaWYodGhpcy5pc0ZvbGQpewogICAgICAgIHJldHVybiAgJ2ZvbGQnOwogICAgICB9ZWxzZSB7CiAgICAgICAgcmV0dXJuICAndW5mb2xkJzsKICAgICAgfQogICAgfSwKICAgIGdldEFuY2hvckl0ZW1XICgpIHsKICAgICAgaWYodGhpcy5pc0ZvbGQpewogICAgICAgIHJldHVybiAgJ2ZvbGQnOwogICAgICB9ZWxzZSB7CiAgICAgICAgcmV0dXJuICAndW5mb2xkJzsKICAgICAgfQogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIHRhYuWIh+aNogogICAgaGFuZGxlQ2xpY2sodGFiLCBldmVudCkgewogICAgICBjb25zb2xlLmxvZyh0YWIsIGV2ZW50KTsKICAgICAgLy8gY29uc29sZS5sb2codGFiLm5hbWUpCiAgICAgIGlmKHRhYi5uYW1lID09ICdmaXJzdCcpewogICAgICAgIC8vIOinpuWPkSfnm7Tmkq0n5LqL5Lu2CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5hbGxMaXZlTGlzdCk7CiAgICAgICAgaWYgKCF0aGlzLmFsbExpdmVMaXN0Lmxlbmd0aCkgewogICAgICAgICAgdGhpcy5pc05vRGF0YSA9IDE7CiAgICAgICAgfWVsc2UgewogICAgICAgICAgdGhpcy5pc05vRGF0YSA9IDA7CiAgICAgICAgfQogICAgICB9ZWxzZXsKICAgICAgICAvLyDop6blj5En5Li75pKtJ+S6i+S7tgogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYWxsQW5jaG9yTGlzdCk7CiAgICAgICAgaWYgKCF0aGlzLmFsbEFuY2hvckxpc3QubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmlzTm9EYXRhID0gMTsKICAgICAgICB9ZWxzZSB7CiAgICAgICAgICB0aGlzLmlzTm9EYXRhID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDojrflj5bmipjlj6DnirbmgIEKICAgIGdldEZvbGRTdGF0ZSAoKSB7CiAgICAgIGxldCBsZWZ0Rm9sZFN0YXRlID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xlZnRGb2xkU3RhdGUnKTsKICAgICAgdGhpcy5pc0ZvbGQgPSAgbGVmdEZvbGRTdGF0ZSA9PT0gbnVsbCB8fCAgbGVmdEZvbGRTdGF0ZSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdHJ1ZTsKICAgICAgLy8gY29uc29sZS5sb2coJ3NlYXJjaDonLHRoaXMuaXNGb2xkKQogICAgfSwKCiAgICAgcm91dGVDaGFuZ2UgKCkgewogICAgICAvLyAgdGhpcy5wYWdlID0gMTsKICAgIC8vICBsb2NhdGlvbi5yZWxvYWQoKQogICAgLy8gIHRoaXMuJHJvdXRlci5nbygwKQogICAgICB0aGlzLmlzTm9EYXRhID0gMDsKICAgICAgIHRoaXMuYWxsTGl2ZUxpc3QgPSBbXTsKICAgICAgIHRoaXMuYWxsQW5jaG9yTGlzdCA9IFtdOwogICAgICAgdGhpcy5yZWNvbW1lbmRMaXZlTGlzdCA9IFtdOwogICAgICAgdGhpcy5nZXRGb2xkU3RhdGUoKTsKICAgICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0KCk7CiAgICAgICB0aGlzLmdldFJlY29tbWVuZExpdmVMaXN0KCk7CiAgICAgfSwKICAgIC8vICDojrflj5bmkJzntKLkv6Hmga8KICAgICBnZXRTZWFyY2hSZXN1bHQgKCkgewogICAgICAgdGhpcy5mcm9tID0gdGhpcy4kcm91dGUucXVlcnkuZnJvbSB8fCAnJzsKICAgICAgIHRoaXMua2V5d29yZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnNlYXJjaENvbnRlbnQgfHwgJyc7CiAgICAgIC8vICB0aGlzLmtleXdvcmQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuc2VhcmNoQ29udGVudCB8fCAnJzsKICAgICAgIHRoaXMucGFnZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2UgfHwgMDsKICAgICAgIGxldCBkYXRhID0gewogICAgICAgIGZyb206IHRoaXMuZnJvbSwKICAgICAgICBrZXl3b3JkOiB0aGlzLmtleXdvcmQsCiAgICAgICAgcGFnZTogdGhpcy5wYWdlCiAgICAgIH0KICAgICAgLy8gbGV0IGhlYWRlcnMgPSB7fQogICAgICBhcGkuc2VhcmNoUmVzdWx0KGRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZygyMjIyKQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhLml0ZW1zKTsKICAgICAgICAgaWYocmVzLmRhdGEuaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgdGhpcy5hbGxTZWFyY2hSZXN1bHQgPSByZXMuZGF0YS5pdGVtczsKICAgICAgICAgIC8vICBjb25zb2xlLmxvZyh0aGlzLmFsbFNlYXJjaFJlc3VsdCkKICAgICAgICAgICB0aGlzLmFsbExpdmVMaXN0ID0gdGhpcy5hbGxTZWFyY2hSZXN1bHQuZmlsdGVyKGl0ZW0gPT4gaXRlbS5saXZpbmcgPT09IHRydWUpCiAgICAgICAgICAgdGhpcy5hbGxBbmNob3JMaXN0LnB1c2goLi4udGhpcy5hbGxTZWFyY2hSZXN1bHQpOwogICAgICAgICAgLy8gIGNvbnNvbGUubG9nKCfnm7Tmkq0nLHRoaXMuYWxsTGl2ZUxpc3QpCiAgICAgICAgICAvLyAgY29uc29sZS5sb2coJ2FsbEFuY2hvckxpc3Q6Jyx0aGlzLmFsbEFuY2hvckxpc3QpCiAgICAgICAgICAgaWYgKCF0aGlzLmFsbExpdmVMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICAgIHRoaXMuYWN0aXZlTmFtZSA9ICdzZWNvbmQnOwogICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5pc05vRGF0YSA9IDE7CiAgICAgICAgICAgICAgLy8gdGhpcy5nZXRSZWNvbW1lbmRMaXZlTGlzdCgpOwogICAgICAgICAgfQogICAgICB9KQogICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKCiAgICAgIH0pCiAgICB9LAogICAgLy8g6I635Y+W5o6o6I2Q5YiX6KGoCiAgICBnZXRSZWNvbW1lbmRMaXZlTGlzdCAoKSB7CiAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICByZWNvbW1lbmRBbmNob3JUeXBlOiAnU0VBUkNIX1BBR0UnLAogICAgICAgIHNpemU6IHRoaXMuc2l6ZSwKICAgICAgfQogICAgICBsZXQgaGVhZGVycyA9IHt9CiAgICAgIGFwaS5yZWNvbW1lbmRMaXZlTGlzdChkYXRhLGhlYWRlcnMpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZygn5pCc57Si5o6o6I2Q55u05pKtJykKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgdGhpcy5yZWNvbW1lbmRMaXZlTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KQogICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKCiAgICAgIH0pCiAgICB9CiAgfQoKfQo="},{"version":3,"sources":["search-result.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"search-result.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"search-box\">\r\n        <h3>{{typeName}}</h3>\r\n        <div class=\"tabs-box\">\r\n             <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n                <el-tab-pane label=\"直播\" name=\"first\">\r\n                    <live-list-item\r\n                    :liveList=\"allLiveList\"\r\n                    :itemW=\"getLiveItemW\"\r\n                    class=\"cc\"\r\n                    >\r\n                    </live-list-item>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"主播\" name=\"second\">\r\n                    <anchor-list-item\r\n                    :anchorList=\"allAnchorList\"\r\n                    :anchorItemW=\"getAnchorItemW\"\r\n                    class=\"cc\"\r\n                    >\r\n                    </anchor-list-item>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n        </div>\r\n        <div class=\"no-data\" v-if=\"isNoData\" v-show=\"isNoData\">\r\n<!--          <img src=\"../assets/icon_nosearch@2x.png\" alt=\"无内容\">-->\r\n          <p>没有找到您搜索的内容</p>\r\n        </div>\r\n        <div v-if=\"isNoData\" v-show=\"isNoData\">\r\n          <h3 class=\"tj\">直播推荐</h3>\r\n          <live-list-item\r\n          :liveList=\"recommendLiveList\"\r\n          :itemW=\"getLiveItemW\"\r\n          class=\"cc\"\r\n          >\r\n          </live-list-item>\r\n        </div>\r\n\r\n        <div class=\"load-more\" v-show=\"isMore\">{{loadTxt}}</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  // @ is an alias to /src\r\n  import LiveListItem from '@/components/live-list-item.vue'\r\n  import anchorListItem from '@/components/anchor-list-item.vue'\r\n  import * as api from \"@/api/api\";\r\n  import { Tabs, TabPane } from 'element-ui';\r\n\r\n  export default {\r\n    name: 'SearchResult',\r\n    components: {\r\n      [Tabs.name]: Tabs,\r\n      [TabPane.name]: TabPane,\r\n      LiveListItem,\r\n      anchorListItem\r\n    },\r\n    data () {\r\n      return {\r\n        page: 0,\r\n        from: '',\r\n        keyword: '',\r\n        activeName: 'first',\r\n        typeName: '搜索结果',\r\n        typeId: 'all',\r\n        loadTxt: '~努力加载中...',\r\n        scrollFlag: false,\r\n        noDataFlag: false,\r\n        isDataShow: 1,\r\n        isNoData: 0,\r\n        isMore: 0,\r\n        allSearchResult: [],\r\n        allLiveList: [],\r\n        allAnchorList: [],\r\n        recommendLiveList: [],\r\n        isFold: false\r\n      }\r\n    },\r\n    props: {\r\n        getisFold: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    created () {\r\n      // console.log('搜索结果')\r\n      this.getFoldState();\r\n      this.getSearchResult();\r\n      this.getRecommendLiveList();\r\n    },\r\n    mounted () {\r\n    },\r\n    destroyed () {\r\n    },\r\n    watch:{\r\n      '$route':'routeChange',\r\n      getisFold (val) {\r\n          this.isFold = val;\r\n          // console.log(999)\r\n      }\r\n    },\r\n    computed: {\r\n      getLiveItemW () {\r\n        if(this.isFold){\r\n          return  'fold';\r\n        }else {\r\n          return  'unfold';\r\n        }\r\n      },\r\n      getAnchorItemW () {\r\n        if(this.isFold){\r\n          return  'fold';\r\n        }else {\r\n          return  'unfold';\r\n        }\r\n      }\r\n\r\n    },\r\n    methods: {\r\n      // tab切换\r\n      handleClick(tab, event) {\r\n        console.log(tab, event);\r\n        // console.log(tab.name)\r\n        if(tab.name == 'first'){\r\n          // 触发'直播'事件\r\n          // console.log(this.allLiveList);\r\n          if (!this.allLiveList.length) {\r\n            this.isNoData = 1;\r\n          }else {\r\n            this.isNoData = 0;\r\n          }\r\n        }else{\r\n          // 触发'主播'事件\r\n          // console.log(this.allAnchorList);\r\n          if (!this.allAnchorList.length) {\r\n            this.isNoData = 1;\r\n          }else {\r\n            this.isNoData = 0;\r\n          }\r\n        }\r\n      },\r\n      // 获取折叠状态\r\n      getFoldState () {\r\n        let leftFoldState = window.sessionStorage.getItem('leftFoldState');\r\n        this.isFold =  leftFoldState === null ||  leftFoldState === 'false' ? false : true;\r\n        // console.log('search:',this.isFold)\r\n      },\r\n\r\n       routeChange () {\r\n        //  this.page = 1;\r\n      //  location.reload()\r\n      //  this.$router.go(0)\r\n        this.isNoData = 0;\r\n         this.allLiveList = [];\r\n         this.allAnchorList = [];\r\n         this.recommendLiveList = [];\r\n         this.getFoldState();\r\n         this.getSearchResult();\r\n         this.getRecommendLiveList();\r\n       },\r\n      //  获取搜索信息\r\n       getSearchResult () {\r\n         this.from = this.$route.query.from || '';\r\n         this.keyword = this.$route.query.searchContent || '';\r\n        //  this.keyword = this.$route.params.searchContent || '';\r\n         this.page = this.$route.query.page || 0;\r\n         let data = {\r\n          from: this.from,\r\n          keyword: this.keyword,\r\n          page: this.page\r\n        }\r\n        // let headers = {}\r\n        api.searchResult(data).then(res => {\r\n          // console.log(2222)\r\n          // console.log(res.data.items);\r\n           if(res.data.items.length) {\r\n             this.allSearchResult = res.data.items;\r\n            //  console.log(this.allSearchResult)\r\n             this.allLiveList = this.allSearchResult.filter(item => item.living === true)\r\n             this.allAnchorList.push(...this.allSearchResult);\r\n            //  console.log('直播',this.allLiveList)\r\n            //  console.log('allAnchorList:',this.allAnchorList)\r\n             if (!this.allLiveList.length) {\r\n                this.activeName = 'second';\r\n             }\r\n            } else {\r\n                this.isNoData = 1;\r\n                // this.getRecommendLiveList();\r\n            }\r\n        })\r\n        .catch(e => {\r\n          console.error(e);\r\n\r\n        })\r\n      },\r\n      // 获取推荐列表\r\n      getRecommendLiveList () {\r\n         let data = {\r\n          recommendAnchorType: 'SEARCH_PAGE',\r\n          size: this.size,\r\n        }\r\n        let headers = {}\r\n        api.recommendLiveList(data,headers).then(res => {\r\n          // console.log('搜索推荐直播')\r\n          // console.log(res.data);\r\n          this.recommendLiveList = res.data;\r\n        })\r\n        .catch(e => {\r\n          console.error(e);\r\n\r\n        })\r\n      }\r\n    }\r\n\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  @import \"@/assets/css/_index.scss\";\r\n\r\n  .search-box {\r\n    h3 {\r\n        margin: 30px 0 20px;\r\n        padding-left: 12px;\r\n        font-size: 22px;\r\n        text-align: left;\r\n        font-weight: 500;\r\n        font-family: 'PingFangSC-Medium','PingFang SC';\r\n        &.tj {\r\n          margin-top: 120px;\r\n        }\r\n    }\r\n    .tabs-box {\r\n        margin: 0 12px;\r\n        .cc {\r\n            margin: 0 -12px;\r\n        }\r\n    }\r\n    .no-data {\r\n        // @extend %clearfix;\r\n        margin: 50px 0;\r\n        text-align: center;\r\n        img {\r\n          width: 150px;\r\n          height:153px;\r\n          margin-bottom: 20px;\r\n        }\r\n        p {\r\n          color: #666;\r\n          font-size: 14px;\r\n        }\r\n\r\n    }\r\n    .load-more {\r\n      @extend %clearfix;\r\n      padding: 20px 0;\r\n      font-size: 15px;\r\n      text-align: center;\r\n      color: #999;\r\n    }\r\n  }\r\n</style>\r\n"]}]}