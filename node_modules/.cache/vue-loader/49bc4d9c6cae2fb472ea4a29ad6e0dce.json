{"remainingRequest":"D:\\pc\\iqiu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\iqiu\\src\\components\\liveroom\\LiveroomGift.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"D:\\pc\\iqiu\\src\\components\\liveroom\\LiveroomGift.vue","mtime":1594000643095},{"path":"D:\\pc\\iqiu\\node_modules\\css-loader\\dist\\cjs.js","mtime":1593501447640},{"path":"D:\\pc\\iqiu\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1593501453075},{"path":"D:\\pc\\iqiu\\node_modules\\postcss-loader\\src\\index.js","mtime":1593501448238},{"path":"D:\\pc\\iqiu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593501341354},{"path":"D:\\pc\\iqiu\\node_modules\\vue-loader\\lib\\index.js","mtime":1593501453075}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmxpdmUtcG9wcGVyIHsKICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQo="},{"version":3,"sources":["LiveroomGift.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgbA;AACA;AACA;AACA","file":"LiveroomGift.vue","sourceRoot":"src/components/liveroom","sourcesContent":["<template>\r\n  <div class=\"live-gift\" :class=\"{'hidden': hidden}\" v-show=\"giftList.length>0\">\r\n    <div class=\"gift-count\">\r\n      <div class=\"my-count\">我的积分: <span class=\"color-main\">{{ userLogin.credit }}</span></div>\r\n      <div class=\"count-tip\">每日登陆赠送 <span class=\"color-main\">200</span> 积分</div>\r\n    </div>\r\n    <div class=\"gift-items\">\r\n      <div class=\"gift-item\" v-for=\"(item,index) in giftList\" :key=\"index\" @click.stop=\"handleSendGift(item,1)\">\r\n        <el-popover\r\n          popper-class=\"live-popper\"\r\n          placement=\"top-end\"\r\n          width=\"305\"\r\n          @hide=\"popverHide\"\r\n          @show=\"popverShow(index)\"\r\n          trigger=\"hover\">\r\n\r\n          <div class=\"popper-content\">\r\n            <div class=\"popper-head\">\r\n              <img class=\"popper-head-logo\" :src=\"item.imageUrl\" alt=\"\">\r\n              <div class=\"popper-head-wrap\">\r\n                <div class=\"title-wrap\">\r\n                  <span class=\"title\">{{ item.name }}</span>\r\n                  <span class=\"count\">（{{ item.price }}积分）</span>\r\n                </div>\r\n                <div class=\"popper-radios-wrap\">\r\n                  <span class=\"popper-radio\" v-for=\"(item,index) in radioList\" :key=\"index\"\r\n                        :class=\"{'active': radioIndex === index}\"\r\n                        @click=\"handleRadio(index,item)\">{{ item.value }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"popper-foot\">\r\n              <p class=\"count\">我的积分：{{ userLogin.credit }}\r\n              </p>\r\n              <!--<input class=\"input\" type=\"tel\" v-model=\"gift.value\">-->\r\n<!--              <el-input class=\"input\" type=\"tel\" v-model=\"gift.value\" placeholder=\"0\"></el-input>-->\r\n              <el-button class=\"poppper-btn\" :loading=\"sending\" @click.stop=\"handleSendGift(item, 1)\">赠送</el-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"item\" slot=\"reference\">\r\n            <img class=\"logo\" :src=\"item.imageUrl\" alt=\"\">\r\n            <div>{{ item.name }}</div>\r\n          </div>\r\n        </el-popover>\r\n      </div>\r\n    </div>\r\n<!--    <div class=\"popper-switch\" @click=\"handleSwitch\">-->\r\n<!--      <i class=\"icon ion_down\" :class=\"{'ion_up': hidden}\"></i>-->\r\n<!--    </div>-->\r\n    <!--TODO 全局用户信息 充值联调-->\r\n<!--    <div class=\"gift-tools\">-->\r\n<!--      <i class=\"gift-tools-icon\"></i>-->\r\n<!--      <span>米粒：{{ userLogin.id?userLogin.accountDto.miCoin.balance:0 }}</span>-->\r\n<!--      <el-button class=\"gift-btn\" @click.stop=\"handlePay\">充值</el-button>-->\r\n<!--    </div>-->\r\n<!--    <PersonWallt v-if=\"isLogin\" ref=\"wallt\" :is-dialog=\"true\" @rechargeSuccess=\"$emit('sendGiftSuccess')\"></PersonWallt>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { sendGift } from '@/api/liveroom'\r\n  import { Popover, Button, Input } from 'element-ui'\r\n  import { throttle } from \"@/utils/debounceAndthrottle\";\r\n  // import PersonWallt from '@/components/MCenter/PersonWallt.vue';\r\n\r\n\r\n  export default {\r\n    name: 'LiveroomGift',\r\n    data() {\r\n      return {\r\n        sending: false,\r\n        hidden: true, // 展示全部礼物\r\n        radioList: [{\r\n          value: 1,\r\n          desc: \"十全十美\"\r\n        }],\r\n        radioIndex: 0,\r\n        gift: {\r\n          value: 1,\r\n        },\r\n        payDialogVisible: false,\r\n        tabBool: [false, true, false],\r\n      }\r\n    },\r\n    components: {\r\n      [Popover.name]: Popover,\r\n      [Button.name]: Button,\r\n      [Input.name]: Input,\r\n      // PersonWallt\r\n    },\r\n    props: {\r\n      userLogin: {\r\n        type: Object,\r\n        default:\r\n          () => {\r\n            return {}\r\n          }\r\n      },\r\n      channelInfo: {\r\n        type: Object,\r\n        default:\r\n          () => {\r\n            return {}\r\n          }\r\n      },\r\n      giftList: {\r\n        type: Array,\r\n        default:\r\n          () => {\r\n            return []\r\n          }\r\n      }\r\n    },\r\n    computed: {\r\n      desc() {\r\n        return this.radioList[this.radioIndex].desc;\r\n      },\r\n      isLogin() {\r\n        return this.$store.getters.isLogin\r\n      },\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n      handleSendGift: throttle(function (item, number) {\r\n        if (!this.isLogin) return this.$emit('login');\r\n        if (isNaN(this.gift.value) || !this.gift.value) return this.Message.error('请输入数字')\r\n        this.sending = true;\r\n        sendGift({\r\n          uid: this.userLogin.id,\r\n          sendFromType: 0, // 礼物来源: credit:0 package:1 coin:2\r\n          platform: 2, //  礼物来源设备类型: ios:0 android:1 pc:2 msite:3\r\n          giftId: item.id,\r\n          number: number ? number : this.gift.value,\r\n          receiveUid: this.channelInfo.id,\r\n        }).then(res => {\r\n          this.sending = false\r\n          if(res.code == 0) {\r\n            this.$emit('sendGiftSuccess', res.data)\r\n          } else {\r\n            this.Message.error(res.msg)\r\n          }\r\n          console.log(res);\r\n        }).catch((err) => {\r\n          if (err.data.msg) this.Message.error(err.data.msg)\r\n          this.sending = false\r\n        })\r\n      }, 1000),\r\n      popverHide() {\r\n        // this.radioIndex = 0;\r\n        // this.gift.value = 10\r\n      },\r\n      handleRadio(index, item) {\r\n        this.radioIndex = index;\r\n        this.gift.value = item.value;\r\n      },\r\n      popverShow(index) {\r\n        if (this.radioIndex == index) return;\r\n        this.radioIndex = 0;\r\n        this.gift.value = 1\r\n      },\r\n      handleSwitch() {\r\n        this.hidden = !this.hidden;\r\n      },\r\n      handlePay() {\r\n        if (!this.isLogin) return this.$emit('login');\r\n        this.$refs.wallt.show(true)\r\n        // this.Message.error('未联调')\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  @import \"@/assets/css/_index.scss\";\r\n\r\n  .live-gift {\r\n    width: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    /*padding-top: 76px;*/\r\n    padding-left: 15px;\r\n\r\n    font-size: 12px;\r\n    background-color: #fff;\r\n    border-radius: 0px 0px 10px 10px;\r\n    box-sizing: border-box;\r\n    &.hidden {\r\n      overflow: hidden;\r\n    }\r\n\r\n\r\n    .my-count {\r\n      margin-bottom: 6px;\r\n      color: #666;\r\n      font-size: 16px;\r\n    }\r\n    .count-tip {\r\n      color: #666;\r\n      font-size: 12px;\r\n    }\r\n    .gift-items {\r\n      /*position: absolute;*/\r\n      /*right: 54px;*/\r\n      flex:1;\r\n      display: flex;\r\n      flex-direction: row;\r\n      flex-wrap: wrap-reverse;\r\n      justify-content: flex-end;\r\n      /*width: 608px;*/\r\n\r\n      align-items: center;\r\n      border-radius: 10px 10px 0 0;\r\n      overflow: hidden;\r\n      background-color: #fff;\r\n    }\r\n\r\n    .gift-item {\r\n      flex: 0 0 auto;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      height: 74px;\r\n      width: 76px;\r\n      text-align: center;\r\n\r\n      .item {\r\n        width: 60px;\r\n        height: 62px;\r\n        cursor: pointer;\r\n        color: $color-title2;\r\n        font-size: 12px;\r\n\r\n        &:hover {\r\n          background-color: $bg-gift;\r\n        }\r\n      }\r\n\r\n      .logo {\r\n        margin-top: 6px;\r\n        margin-bottom: 4px;\r\n        width: 32px;\r\n        height: 32px;\r\n      }\r\n    }\r\n\r\n    .popper-switch {\r\n      /*position: relative;*/\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      float: right;\r\n      margin-top: 10px;\r\n      margin-right: 20px;\r\n      width: 24px;\r\n      height: 50px;\r\n      border: 2px solid $color-main;\r\n      border-radius: 6px;\r\n      cursor: pointer;\r\n\r\n      .icon {\r\n        /*position: absolute;*/\r\n        /*top: 50%;*/\r\n        /*left: 50%;*/\r\n        transform: rotateZ(270deg);\r\n\r\n        width: 9px;\r\n        height: 13px;\r\n        background: url('~@/assets/img/live-gift-arrow.png') center center no-repeat;\r\n        background-size: 100% 100%;\r\n      }\r\n\r\n      .ion_down {\r\n        line-height: 1;\r\n        -webkit-transition: -webkit-transform 0.2s ease-out;\r\n        transition: transform 0.2s ease-out;\r\n      }\r\n\r\n      .ion_up {\r\n        -webkit-transform: rotateZ(450deg);\r\n        transform: rotateZ(450deg);\r\n      }\r\n    }\r\n\r\n    .gift-tools {\r\n      clear: right;\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      align-items: center;\r\n      /*padding-top: 76px;*/\r\n      height: 47px;\r\n      font-size: 12px;\r\n      color: $color-title3;\r\n\r\n      .gift-tools-icon {\r\n        margin-right: 4px;\r\n        width: 16px;\r\n        height: 16px;\r\n        background: url('~@/assets/img/live-gift-icon.png') 0 0 no-repeat;\r\n        background-size: 100%;\r\n      }\r\n\r\n      .gift-btn {\r\n        margin-left: 20px;\r\n        margin-right: 20px;\r\n        padding: 0;\r\n        width: 53px;\r\n        height: 23px;\r\n        line-height: 23px;\r\n        text-align: center;\r\n        font-weight: 400;\r\n        color: #fff;\r\n        border-radius: 23px;\r\n        border: 0 none;\r\n        background-color: #F16C01;\r\n      }\r\n    }\r\n  }\r\n\r\n  .popper-content {\r\n    width: 305px !important;\r\n    /*height: 141px;*/\r\n    .popper-head {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n      height: 100px;\r\n      border-bottom: 1px solid #D9D9D9;\r\n\r\n      .popper-head-logo {\r\n        margin: 0 15px 0 10px;\r\n        padding: 13px;\r\n        width: 80px;\r\n        height: 80px;\r\n        box-sizing: border-box;\r\n        border: 1px solid $color-border;\r\n        border-radius: 4px;\r\n      }\r\n\r\n      .popper-head-wrap {\r\n        height: 80px;\r\n      }\r\n\r\n      .title-wrap {\r\n        margin-top: 15px;\r\n\r\n        .title {\r\n          font-size: 16px;\r\n          color: $color-title1;\r\n          @extend .bold;\r\n        }\r\n\r\n        .count {\r\n          /*margin-left: 5px;*/\r\n          font-size: 10px;\r\n        }\r\n      }\r\n\r\n      .popper-radios-wrap {\r\n        margin-top: 9px;\r\n\r\n        .popper-radio {\r\n          display: inline-block;\r\n          margin-right: 5px;\r\n          width: 48px;\r\n          height: 22px;\r\n          line-height: 22px;\r\n          text-align: center;\r\n          color: $color-title2;\r\n          border: 1px solid $color-border;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n\r\n          &.active {\r\n            background: rgba(242, 246, 255, 1);\r\n            color: $color-main;\r\n            border: 1px solid $color-main;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .popper-foot {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n      height: 40px;\r\n\r\n      .count {\r\n        flex: 1;\r\n        margin-left: 10px;\r\n\r\n        .desc {\r\n          color: $color-title3;\r\n        }\r\n      }\r\n\r\n      .input {\r\n        margin-right: 10px;\r\n        width: 48px;\r\n        height: 20px;\r\n\r\n      }\r\n\r\n      ::v-deep .el-input__inner {\r\n        height: 20px;\r\n        line-height: 20px;\r\n        font-size: 12px;\r\n        text-align: center;\r\n        padding: 0 2px;\r\n      }\r\n\r\n      .poppper-btn {\r\n        margin-right: 10px;\r\n        padding: 0;\r\n        width: 53px;\r\n        height: 26px;\r\n        line-height: 26px;\r\n        text-align: center;\r\n        font-weight: 400;\r\n        color: #fff;\r\n        border-radius: 4px;\r\n        border: 0 none;\r\n        background-color: $color-main;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n<style>\r\n  .live-popper {\r\n    padding: 0 !important;\r\n    overflow: hidden;\r\n  }\r\n</style>\r\n"]}]}