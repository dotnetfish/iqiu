{"remainingRequest":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/views/MCenter/PersonInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/views/MCenter/PersonInfo.vue","mtime":1595570908591},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/cache-loader/dist/cjs.js","mtime":1595570902420},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/babel-loader/lib/index.js","mtime":1595570901804},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/cache-loader/dist/cjs.js","mtime":1595570902420},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/vue-loader/lib/index.js","mtime":1595570907990}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFJvdywgQ29sLCBCdXR0b24sIEF2YXRhciwgQ2FyZCwgSW5wdXQsIE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKCmltcG9ydCB7IHVwZGF0ZVVzZXIsIHVzZXJzTG9naW5JbmZvIH0gZnJvbSAiQC9hcGkvbWNlbnRlcmFwaSI7CmltcG9ydCBDcm9wcGVyIGZyb20gJ0AvY29tcG9uZW50cy9NQ2VudGVyL0Nyb3BwZXIudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGVyc29uSW5mbyIsCiAgY29tcG9uZW50czogewogICAgW1Jvdy5uYW1lXTogUm93LAogICAgW0NvbC5uYW1lXTogQ29sLAogICAgW0lucHV0Lm5hbWVdOiBJbnB1dCwKICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbiwKICAgIFtBdmF0YXIubmFtZV06IEF2YXRhciwKICAgIFtDYXJkLm5hbWVdOiBDYXJkLAogICAgW01lc3NhZ2UubmFtZV06IE1lc3NhZ2UsCiAgICBDcm9wcGVyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5wdXQ6ICIiLAogICAgICBpc0FuY2hvcjogZmFsc2UsCgogICAgICBzcXVhcmVVcmw6ICcnLAogICAgICB1c2VyTmFtZTogJycsCiAgICAgIHVpZDogJycsCiAgICAgIHBob25lOiAnJywKICAgICAgd2VjaGF0OiAnJywKICAgICAgY3JlZGl0OiAwLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyU3RhdHVzOiB7CiAgICAgIGdldCgpIHsKICAgICAgICBjb25zb2xlLmxvZygnaG9tZS1uYXYtdXNlcuajgOa1i+WIsOeZu+W9leeKtuaAgeaUueWPmCcsIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdGF0dXMpCiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdGF0dXMKICAgICAgfSwKICAgICAgc2V0KHZhbCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlVXNlclN0YXR1cycsIHZhbCkKICAgICAgfQogICAgfSwKICAgIGlzTG9naW4oKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmlzTG9naW4KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVBsYXkoKSB7CgogICAgfSwKICAgIGVkaXRJbmZvKCkgewogICAgICB0aGlzLiRlbWl0KCdzaG93SW5mb0VkaXQnLCAyKTsKICAgIH0sCiAgICBzaG93Q29zdERldGFpbCgpIHsKICAgICAgdGhpcy4kZW1pdCgnc2hvd0Nvc3REZXRhaWwnLCAzKTsKICAgIH0sCiAgICB3YWxsdCgpIHsKICAgICAgdGhpcy4kZW1pdCgnc2hvd1dhbHQnLCB0cnVlKTsKICAgIH0sCiAgICBoYW5kbGVCaW5kTW9iaWxlKCkgewogICAgICBpZiAodGhpcy5waG9uZSkgewogICAgICAgIHRoaXMuTWVzc2FnZS5zdWNjZXNzKCfmgqjlt7Lnu5HlrponKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuTWVzc2FnZSgnMTInKQogICAgICB9CiAgICB9LAogICAgdXNlcnNMb2dpbkluZm8oKSB7CiAgICAgIHVzZXJzTG9naW5JbmZvKCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgICAgdGhpcy5zcXVhcmVVcmwgPSByZXNwb25zZS5kYXRhLmF2YXRhclVybDsKICAgICAgICAgIHRoaXMudXNlck5hbWUgPSByZXNwb25zZS5kYXRhLnVuYW1lOwogICAgICAgICAgdGhpcy51aWQgPSByZXNwb25zZS5kYXRhLmlkOwogICAgICAgICAgdGhpcy5waG9uZSA9IHJlc3BvbnNlLmRhdGEubW9iaWxlOwogICAgICAgICAgdGhpcy5pc0FuY2hvciA9IHJlc3BvbnNlLmRhdGEuaXNBbmNob3I7CiAgICAgICAgICB0aGlzLmNyZWRpdCA9IHJlc3BvbnNlLmRhdGEuY3JlZGl0OwoKICAgICAgICAgIHRoaXMudXNlclN0YXR1cyA9IHsKICAgICAgICAgICAgbG9naW5TdGF0dXM6ICdpc0xvZ2luJywKICAgICAgICAgICAgdXNlckluZm86IHsKICAgICAgICAgICAgICBhdmF0YXJVcmw6IHJlc3BvbnNlLmRhdGEuYXZhdGFyVXJsLAogICAgICAgICAgICAgIHVpZDogcmVzcG9uc2UuZGF0YS5pZCwKICAgICAgICAgICAgICB1bmFtZTogcmVzcG9uc2UuZGF0YS51bmFtZSwKICAgICAgICAgICAgICBiYWxhbmNlOiByZXNwb25zZS5kYXRhLmJhbGFuY2UKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKHJlc3BvbnNlLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgbGV0IGRhdGEgPQogICAgICAgIHsKICAgICAgICAgIHVuYW1lOiB0aGlzLnVzZXJOYW1lCiAgICAgICAgfTsKICAgICAgdGhpcy51cGRhdGVVc2VyKGRhdGEsICflkI3lrZfkv67mlLnmiJDlip8nKQogICAgfSwKICAgIHVwZGF0YUltZyh1cmwpIHsKICAgICAgdGhpcy5zcXVhcmVVcmwgPSB1cmw7CiAgICAgIGxldCBkYXRhID0KICAgICAgICB7CiAgICAgICAgICBhdmF0YXJVcmw6IHVybAogICAgICAgIH07CiAgICAgIHRoaXMudXBkYXRlVXNlcihkYXRhLCAn5aS05YOP5LiK5Lyg5oiQ5YqfJykKICAgIH0sCiAgICB1cGRhdGVVc2VyKGRhdGEsIG1lc3NhZ2VzKSB7CiAgICAgIHVwZGF0ZVVzZXIoZGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgICAgdGhpcy51c2Vyc0xvZ2luSW5mbygpCiAgICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlcywKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIE1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5lcnJvciwKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgICBNZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IuZGF0YS5tc2csCiAgICAgICAgICB9KQoKICAgICAgICB9KTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy51c2Vyc0xvZ2luSW5mbygpOwogIH0KfQo="},{"version":3,"sources":["PersonInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PersonInfo.vue","sourceRoot":"src/views/MCenter","sourcesContent":["<!--Created by fly on 2019/12/25-->\n<template>\n  <section>\n    <div class=\"bind-mobile info-wrap\">\n\n      <h3>个人资料</h3>\n      <div class=\"userinfo-wrap\">\n        <div class=\"avatar-info\">\n          <div class=\"title\">头像</div>\n          <cropper @updataImg=\"updataImg\">\n            <img :src=\"squareUrl\" alt=\"logo\"\n                 style=\"width:120px;height:120px;border-radius: 50%\">\n          </cropper>\n        </div>\n        <div class=\"name-info\">\n          <div class=\"title\">姓名</div>\n          <el-input v-model=\"userName\" size=\"medium\" minlength=\"5\" class=\"name-input\" placeholder=\"请输入\"></el-input>\n        </div>\n        <div class=\"name-info\">\n          <div class=\"title\">积分</div>\n          <div class=\"blod\"> {{ credit }}</div>\n\n        </div>\n        <el-button type=\"primary\" size=\"small\" class=\"userinfo-btn\" @click=\"save\">提交</el-button>\n      </div>\n      <h3 style=\"margin-top:40px;\">账号管理</h3>\n      <section class=\"accout-wrap\">\n        <div class=\"mobile-wrap\">\n          <img src=\"@/assets/img/Mcenter-mobile.png\" style=\"width:46px;height:60px;\">\n          <div class=\"content\">\n            <p v-if=\"!!phone\">手机已绑定 <span>({{ phone }})</span></p>\n            <p v-else>手机未绑定</p>\n            <p>手机绑定可以享受手机相关的安全与提醒服务</p>\n          </div>\n          <el-button type=\"primary\" size=\"small\" round @click=\"handleBindMobile\" :disabled=\"!!phone\">{{\n            !!phone?'已绑定':'绑定手机号' }}\n          </el-button>\n\n        </div>\n        <div class=\"mobile-wrap\">\n          <img src=\"@/assets/img/Mcenter-play.png\" style=\"width:58px;height:42px;\">\n          <div class=\"content\">\n            <p>我要开播</p>\n            <p>丰富奖励，成为主播</p>\n          </div>\n          <el-button type=\"primary\" size=\"small\" round @click=\"$emit('AnchorApply','3')\" :disabled=\"!!isAnchor\">{{\n            !!isAnchor?'已是主播':'成为主播' }}\n          </el-button>\n        </div>\n      </section>\n    </div>\n\n    <!--    <div class=\"info-wrap\">-->\n    <!--      <div class=\"info\">-->\n    <!--        <div class=\"fl info-logo\">-->\n    <!--          <el-avatar :size=\"120\" fit=\"contain\" :src=\"squareUrl\" style=\"background-color: transparent\">-->\n    <!--            <img src=\"@/assets/img/user-avatar-default.png\"/>-->\n    <!--          </el-avatar>-->\n    <!--        </div>-->\n    <!--        <div class=\"fl info-text\">-->\n    <!--          <section>-->\n    <!--            <div class=\"name-wrap\">-->\n    <!--              <span class=\"info-name\">{{userName}}</span>-->\n    <!--              <img src=\"@/assets/img/Mcenter-person-add.png\" class=\"info-add\" alt=\"\" @click=\"editInfo\">-->\n    <!--            </div>-->\n    <!--            <div>-->\n    <!--              UID: <span>{{uid}}</span>-->\n    <!--            </div>-->\n    <!--            <div class=\"info-mili\">-->\n    <!--              <img src=\"@/assets/img/Mcenter-mili.png\" style=\"width:20px;height: 20px;\">-->\n    <!--              <span class=\"ml5\">{{mili}}</span>-->\n    <!--              <el-button type=\"primary\" class=\"recharge\" @click=\"wallt\">充值-->\n    <!--              </el-button>-->\n    <!--              <el-button type=\"text\" size=\"mini\" class=\"record\" @click=\"showCostDetail\">充值记录-->\n    <!--              </el-button>-->\n    <!--            </div>-->\n    <!--          </section>-->\n    <!--          <el-button type=\"primary\" class=\"broadcast\" @click=\"$emit('AnchorApply','3')\"><span><img src=\"@/assets/img/Mcenter-play-icon.png\"-->\n    <!--                                                                                style=\"display: inline-block;width: 24px;hehght:24px;margin-right:10px\">我要开播</span>-->\n    <!--          </el-button>-->\n    <!--        </div>-->\n    <!--      </div>-->\n    <!--    </div>-->\n\n  </section>\n\n</template>\n\n<script>\n  import { Row, Col, Button, Avatar, Card, Input, Message } from 'element-ui';\n\n  import { updateUser, usersLoginInfo } from \"@/api/mcenterapi\";\n  import Cropper from '@/components/MCenter/Cropper.vue';\n\n  export default {\n    name: \"PersonInfo\",\n    components: {\n      [Row.name]: Row,\n      [Col.name]: Col,\n      [Input.name]: Input,\n      [Button.name]: Button,\n      [Avatar.name]: Avatar,\n      [Card.name]: Card,\n      [Message.name]: Message,\n      Cropper\n    },\n    data() {\n      return {\n        input: \"\",\n        isAnchor: false,\n\n        squareUrl: '',\n        userName: '',\n        uid: '',\n        phone: '',\n        wechat: '',\n        credit: 0,\n      };\n    },\n    computed: {\n      userStatus: {\n        get() {\n          console.log('home-nav-user检测到登录状态改变', this.$store.state.userStatus)\n          return this.$store.state.userStatus\n        },\n        set(val) {\n          this.$store.commit('updateUserStatus', val)\n        }\n      },\n      isLogin() {\n        return this.$store.getters.isLogin\n      }\n    },\n    methods: {\n      handlePlay() {\n\n      },\n      editInfo() {\n        this.$emit('showInfoEdit', 2);\n      },\n      showCostDetail() {\n        this.$emit('showCostDetail', 3);\n      },\n      wallt() {\n        this.$emit('showWalt', true);\n      },\n      handleBindMobile() {\n        if (this.phone) {\n          this.Message.success('您已绑定')\n        } else {\n          this.Message('12')\n        }\n      },\n      usersLoginInfo() {\n        usersLoginInfo().then((response) => {\n          if (response.code === 0) {\n            this.squareUrl = response.data.avatarUrl;\n            this.userName = response.data.uname;\n            this.uid = response.data.id;\n            this.phone = response.data.mobile;\n            this.isAnchor = response.data.isAnchor;\n            this.credit = response.data.credit;\n\n            this.userStatus = {\n              loginStatus: 'isLogin',\n              userInfo: {\n                avatarUrl: response.data.avatarUrl,\n                uid: response.data.id,\n                uname: response.data.uname,\n                balance: response.data.balance\n              }\n            }\n          } else {\n            console.error(response.error);\n          }\n        })\n          .catch(function (error) {\n            console.error(error);\n          });\n      },\n      save() {\n        let data =\n          {\n            uname: this.userName\n          };\n        this.updateUser(data, '名字修改成功')\n      },\n      updataImg(url) {\n        this.squareUrl = url;\n        let data =\n          {\n            avatarUrl: url\n          };\n        this.updateUser(data, '头像上传成功')\n      },\n      updateUser(data, messages) {\n        updateUser(data).then((response) => {\n          if (response.code === 0) {\n            this.usersLoginInfo()\n            Message.success({\n              message: messages,\n            })\n          } else {\n            Message.error({\n              message: response.error,\n            })\n          }\n        })\n          .catch(function (error) {\n            // debugger\n            Message.error({\n              message: error.data.msg,\n            })\n\n          });\n      },\n    },\n    mounted() {\n      this.usersLoginInfo();\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"@/assets/css/_index.scss\";\n\n  .ml5 {\n    margin-left: 5px;\n  }\n\n  .fl {\n    float: left;\n  }\n\n  .info-wrap {\n    background-color: #fff;\n    border-radius: 0px;\n\n    ::v-deep .el-divider--horizontal {\n      width: auto;\n      padding: 30px auto 20px;\n      border-color: #D9D9D9;\n    }\n  }\n\n  .info {\n    padding: 30px;\n    height: 180px;\n    box-sizing: border-box;\n  }\n\n\n  .info-text {\n    box-sizing: border-box;\n    width: calc(100% - 130px);\n    padding-left: 20px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .name-wrap {\n      margin-top: 18px;\n      display: flex;\n      justify-content: flex-start;\n      align-items: center;\n    }\n\n    .info-name {\n      margin-right: 10px;\n      line-height: 33px;\n      color: $color-title1;\n      font-size: 20px;\n      @extend .bold;\n    }\n\n    .info-add {\n      width: 14px;\n      height: 14px;\n      cursor: pointer;\n    }\n  }\n\n  .info-mili {\n    margin-top: 25px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n\n    font-size: 12px;\n    color: $color-title2;\n  }\n\n  .recharge {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 46px;\n    height: 24px;\n    padding: 0;\n    margin-left: 20px;\n\n    font-size: 12px;\n    color: #F9F9F9;\n  }\n\n  .record {\n    font-size: 12px;\n  }\n\n  .broadcast {\n    width: 180px;\n    padding: 0;\n    height: 60px;\n    font-size: 14px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    span {\n      width: 180px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n\n  .bind-mobile {\n    padding: 30px 30px 200px;\n    line-height: 1;\n\n    h3 {\n      margin-bottom: 30px;\n      font-size: 20px;\n      font-weight: 600;\n      color: $color-title1;\n    }\n\n    .accout-wrap {\n      display: flex;\n      justify-content: space-between;\n\n      .mobile-wrap {\n        width: 438px;\n        height: 140px;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        padding-left: 20px;\n        padding-right: 8px;\n        background-color: #F0F0F0;\n        box-sizing: border-box;\n\n        img {\n          width: 35px;\n          height: 35px;\n          margin-right: 2px;\n        }\n\n        .content {\n          margin-left: 10px;\n          flex: 1;\n          font-size: 12px;\n          line-height: 17px;\n\n          p:nth-child(1) {\n            margin-bottom: 10px;\n            font-size: 16px;\n            font-weight: 700;\n            color: #333;\n            line-height: 20px;\n          }\n\n          span {\n\n            font-size: 12px;\n            color: $color-title3\n          }\n        }\n\n        .btn-bind {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          padding: 0;\n          width: 102px;\n          height: 30px;\n\n          font-size: 14px;\n        }\n      }\n\n    }\n\n    .userinfo-wrap {\n      padding-bottom: 40px;\n      border-bottom: 1px solid $color-border;\n\n      .avatar-info, .name-info {\n        margin-bottom: 30px;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n\n        .title {\n          width: 102px;\n          text-align: center;\n          font-size: 16px;\n          font-weight: 500;\n          color: #666;\n        }\n\n        .name-input {\n          width: 460px;\n          /*height: 52px;*/\n          ::v-deep .el-input__inner {\n            height: 52px;\n            line-height: 52px;\n          }\n        }\n      }\n\n      .userinfo-btn {\n        margin-left: 102px;\n        /*width: 149px;*/\n        /*height: 50px;*/\n        font-size: 16px;\n      }\n    }\n  }\n\n</style>\n"]}]}