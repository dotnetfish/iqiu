{"remainingRequest":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/components/liveroom/LiveroomBan.vue?vue&type=style&index=0&id=b1715720&scoped=true&lang=scss&","dependencies":[{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/src/components/liveroom/LiveroomBan.vue","mtime":1595570908568},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/css-loader/dist/cjs.js","mtime":1595570903613},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1595570907990},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/postcss-loader/src/index.js","mtime":1595570906300},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/sass-loader/dist/cjs.js","mtime":1595570907455},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/cache-loader/dist/cjs.js","mtime":1595570902420},{"path":"/Users/zj-db0720/work/sourcescode/projects/gitee/iqiu/node_modules/vue-loader/lib/index.js","mtime":1595570907990}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICJAL2Fzc2V0cy9jc3MvX2luZGV4LnNjc3MiOwoKLmJhbi1tYXNrIHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgei1pbmRleDogMjk7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CgouYmFuLXdyYXAgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDU0cHg7CiAgbGVmdDogNTBweDsKICB6LWluZGV4OiAzMDsKICB3aWR0aDogMjYwcHg7CiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKTsKICBib3gtc2hhZG93OiAwcHggMnB4IDE2cHggMHB4IHJnYmEoMzAsIDMyLCAzOSwgMC4xMSk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CgogIC5iYW4tYnRucyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogIH0KCiAgLmJhbi1sb2dvIHsKICAgIG1hcmdpbi10b3A6IDE1cHg7CiAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICB3aWR0aDogNzBweDsKICAgIGhlaWdodDogNzBweDsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICB9CgogIC5iYW4tbmFtZSB7CiAgICBtYXJnaW46IDA7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBjb2xvcjogJGNvbG9yLXRpdGxlMTsKICAgIEBleHRlbmQgLmJvbGQ7CiAgfQoKICAuYmFuLXVpZCB7CiAgICBtYXJnaW4tdG9wOiA3cHg7CiAgICBtYXJnaW4tYm90dG9tOiA3cHg7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogJGNvbG9yLXRpdGxlMzsKICB9CgogIC5iYW4tYnRuIHsKICAgIG1hcmdpbjogMCAxMnB4OwogICAgaGVpZ2h0OiA1NXB4OwogICAgbGluZS1oZWlnaHQ6IDU1cHg7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogJGNvbG9yLW1haW47CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Y0RjRGNDsKCiAgICAmOm50aC1sYXN0LWNoaWxkKDEpIHsKICAgICAgYm9yZGVyLWJvdHRvbTogMDsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgfQogIH0KfQo="},{"version":3,"sources":["LiveroomBan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"LiveroomBan.vue","sourceRoot":"src/components/liveroom","sourcesContent":["<template>\n  <section>\n    <div class=\"ban-mask\" v-if=\"banDialog\" @click.stop.self=\"banDialog = false\">\n    </div>\n\n    <transition name=\"el-fade-in-linear\">\n      <div class=\"ban-wrap\" v-if=\"banDialog\">\n        <img :src=\"banUserInfo._lcattrs.user.avatar\" alt=\"\" class=\"ban-logo\">\n        <h3 class=\"ban-name\">{{ banUserInfo._lcattrs.user.name }}</h3>\n        <div class=\"ban-uid\">UID:{{ banUserInfo._lcattrs.user.id }}</div>\n        <!--        <div class=\"ban-btn\" @click.stop=\"handleBan(item.value)\" v-for=\"item in banList\" :key=\"item.value\">{{ item.title-->\n        <!--          }}-->\n        <!--        </div>-->\n        <div class=\"ban-btn\">\n          房间禁言：\n          <el-select v-model=\"roomBan\" style=\"width:100px;margin-right:10px;\" placeholder=\"请选择\" size=\"small\">\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.key\"\n              :label=\"item.value\"\n              :value=\"item.key\">\n            </el-option>\n          </el-select>\n          <el-button type=\"primary\" size=\"mini\" @click.stop=\"handleBan(roomBan, 0)\">确定</el-button>\n        </div>\n        <div class=\"ban-btn\" v-if=\"userInfo.channelRoleType===9\">\n          全站禁言：\n          <el-select v-model=\"allBan\" style=\"width:100px;margin-right:10px;\" placeholder=\"请选择\" size=\"small\">\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.key\"\n              :label=\"item.value\"\n              :value=\"item.key\">\n            </el-option>\n          </el-select>\n          <el-button type=\"primary\" size=\"mini\" @click.stop=\"handleBan(allBan, 1)\">确定</el-button>\n        </div>\n<!--        <div class=\"ban-btn\" v-if=\"userInfo.channelRoleType===9\" @click.stop=\"handleBan(4)\">全站永久禁言</div>-->\n        <div class=\"ban-btn\" v-if=\"userInfo.channelRoleType===2\" @click.stop=\"handleSetManager(0)\">设为房管</div>\n      </div>\n    </transition>\n  </section>\n</template>\n\n<script>\n  /*\n  * 主播和房管无法禁言已被禁言的人，提示”该用户已被禁言\n  * 超管可再次禁言已被禁言的用户，效果为覆盖之前的禁言时间\n  * 禁言后输入框部分显示禁言时间，且无法输入文字。\n  * */\n\n  import { forbidUser, setManager } from '@/api/liveroom';\n  import { throttle } from \"@/utils/debounceAndthrottle\";\n  import { Select, Option, Button } from 'element-ui';\n\n  export default {\n    name: 'LiveroomBan',\n    props: {\n      userInfo: Object, // channelRoleType 0(普通用户), 1(房管), 2(主播), 9(超管)\n    },\n    components: {\n      [Select.name]: Select,\n      [Option.name]: Option,\n      [Button.name]: Button,\n    },\n    data() {\n      return {\n        options: [\n          {\n            key: 5,\n            value: \"10分钟\"\n          },\n          {\n            key: 6,\n            value: \"30分钟\"\n          },\n          {\n            key: 7,\n            value: \"1小时\"\n          },\n          {\n            key: 1,\n            value: \"24小时\"\n          },\n          {\n            key: 8,\n            value: \"3天\"\n          },\n          {\n            key: 2,\n            value: \"7天\"\n          },\n          {\n            key: 3,\n            value: \"30天\"\n          },\n          {\n            key: 9,\n            value: \"6个月\"\n          },\n          {\n            key: 4,\n            value: \"永久\"\n          }], // 禁言类型: 0 取消禁言; 5:10分钟, 6:30分钟, 7:1小时, 1:24小时, 8:3天, 2:7天, 3:30天, 9:6个月, 4:永久(20年)\n        sending: false,\n        banDialog: false,\n        roomBan: \"\",\n        allBan: \"\",\n        banList: [{  // 0 取消禁言; 5:10分钟, 6:30分钟, 7:1小时, 1:24小时, 8:3天, 2:7天, 3:30天, 9:6个月, 4:永久(20年)\n          value: 1,\n          title: '禁言24小时'\n        }, {\n          value: 2,\n          title: '禁言7天'\n        }, {\n          value: 3,\n          title: '禁言30天'\n        }],\n        banUserInfo: {}\n      }\n    },\n    mounted() {\n    },\n    methods: {\n      show(item) {\n        // 权限不足 ( 未使用当前用户被禁言 || this.userInfo.forbid)\n        if (this.userInfo.channelRoleType === 0) return;\n        this.roomBan = \"\";\n        this.allBan = \"\";\n\n        this.banDialog = true;\n        this.banUserInfo = item;\n        console.log(item);\n      },\n      handleBan: throttle(function (value, forbidRoomType) {\n        console.log(value, 'ban');\n        if(!value) {\n          return this.Message.error({\n            message: \"请选择禁言天数\",\n          })\n        }\n        this.sending = true;\n        return forbidUser({\n          beForbidUid: this.banUserInfo._lcattrs.user.id,\n          channelId: this.$route.params.liveroom,\n          forbidType: value,\n          forbidRoomType: forbidRoomType\n        }).then(res => {\n          console.log(res);\n          this.banDialog = false;\n          this.Message.success({\n            message: res.msg,\n          })\n          this.sending = false;\n          this.roomBan = \"\";\n          this.allBan = \"\";\n        }).catch(res => {\n          if (res.data.msg) this.Message.error({\n            message: res.data.msg,\n          })\n          this.sending = false;\n          console.log(res);\n        })\n      }, 1000),\n      handleSetManager: throttle(function (value) {\n        console.log(value, 'ban');\n        this.sending = true;\n        return setManager({\n          operator: value, // 操作:0 添加; 1 删除\n          uid: this.banUserInfo._lcattrs.user.id\n        }).then(res => {\n          this.banDialog = false;\n          this.Message.success({\n            message: res.msg,\n          })\n          this.sending = false;\n        }).catch(res => {\n          if (res.data.msg) this.Message.error({\n            message: res.data.msg,\n          })\n          this.sending = false;\n        })\n      }, 1000),\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"@/assets/css/_index.scss\";\n\n  .ban-mask {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 29;\n    width: 100%;\n    height: 100%;\n    background-color: transparent;\n  }\n\n  .ban-wrap {\n    position: absolute;\n    top: 54px;\n    left: 50px;\n    z-index: 30;\n    width: 260px;\n    background: rgba(255, 255, 255, 1);\n    box-shadow: 0px 2px 16px 0px rgba(30, 32, 39, 0.11);\n    border-radius: 10px;\n    text-align: center;\n\n    .ban-btns {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .ban-logo {\n      margin-top: 15px;\n      margin-bottom: 8px;\n      width: 70px;\n      height: 70px;\n      border-radius: 50%;\n    }\n\n    .ban-name {\n      margin: 0;\n      font-size: 14px;\n      color: $color-title1;\n      @extend .bold;\n    }\n\n    .ban-uid {\n      margin-top: 7px;\n      margin-bottom: 7px;\n      font-size: 12px;\n      color: $color-title3;\n    }\n\n    .ban-btn {\n      margin: 0 12px;\n      height: 55px;\n      line-height: 55px;\n      font-size: 12px;\n      color: $color-main;\n      cursor: pointer;\n      border-bottom: 1px solid #F4F4F4;\n\n      &:nth-last-child(1) {\n        border-bottom: 0;\n        font-size: 14px;\n      }\n    }\n  }\n</style>\n"]}]}