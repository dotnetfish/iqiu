{"remainingRequest":"D:\\pc端clone\\iqiu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc端clone\\iqiu\\src\\components\\liveroom\\LiveroomBan.vue?vue&type=style&index=0&id=b1715720&scoped=true&lang=scss&","dependencies":[{"path":"D:\\pc端clone\\iqiu\\src\\components\\liveroom\\LiveroomBan.vue","mtime":1594000643094},{"path":"D:\\pc端clone\\iqiu\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\pc端clone\\iqiu\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\pc端clone\\iqiu\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\pc端clone\\iqiu\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\pc端clone\\iqiu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\pc端clone\\iqiu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICJAL2Fzc2V0cy9jc3MvX2luZGV4LnNjc3MiOwoKLmJhbi1tYXNrIHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgei1pbmRleDogMjk7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CgouYmFuLXdyYXAgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDU0cHg7CiAgbGVmdDogNTBweDsKICB6LWluZGV4OiAzMDsKICB3aWR0aDogMjYwcHg7CiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKTsKICBib3gtc2hhZG93OiAwcHggMnB4IDE2cHggMHB4IHJnYmEoMzAsIDMyLCAzOSwgMC4xMSk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CgogIC5iYW4tYnRucyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogIH0KCiAgLmJhbi1sb2dvIHsKICAgIG1hcmdpbi10b3A6IDE1cHg7CiAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICB3aWR0aDogNzBweDsKICAgIGhlaWdodDogNzBweDsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICB9CgogIC5iYW4tbmFtZSB7CiAgICBtYXJnaW46IDA7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBjb2xvcjogJGNvbG9yLXRpdGxlMTsKICAgIEBleHRlbmQgLmJvbGQ7CiAgfQoKICAuYmFuLXVpZCB7CiAgICBtYXJnaW4tdG9wOiA3cHg7CiAgICBtYXJnaW4tYm90dG9tOiA3cHg7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogJGNvbG9yLXRpdGxlMzsKICB9CgogIC5iYW4tYnRuIHsKICAgIG1hcmdpbjogMCAxMnB4OwogICAgaGVpZ2h0OiA1NXB4OwogICAgbGluZS1oZWlnaHQ6IDU1cHg7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogJGNvbG9yLW1haW47CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Y0RjRGNDsKCiAgICAmOm50aC1sYXN0LWNoaWxkKDEpIHsKICAgICAgYm9yZGVyLWJvdHRvbTogMDsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgfQogIH0KfQo="},{"version":3,"sources":["LiveroomBan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"LiveroomBan.vue","sourceRoot":"src/components/liveroom","sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"ban-mask\" v-if=\"banDialog\" @click.stop.self=\"banDialog = false\">\r\n    </div>\r\n\r\n    <transition name=\"el-fade-in-linear\">\r\n      <div class=\"ban-wrap\" v-if=\"banDialog\">\r\n        <img :src=\"banUserInfo._lcattrs.user.avatar\" alt=\"\" class=\"ban-logo\">\r\n        <h3 class=\"ban-name\">{{ banUserInfo._lcattrs.user.name }}</h3>\r\n        <div class=\"ban-uid\">UID:{{ banUserInfo._lcattrs.user.id }}</div>\r\n        <!--        <div class=\"ban-btn\" @click.stop=\"handleBan(item.value)\" v-for=\"item in banList\" :key=\"item.value\">{{ item.title-->\r\n        <!--          }}-->\r\n        <!--        </div>-->\r\n        <div class=\"ban-btn\">\r\n          房间禁言：\r\n          <el-select v-model=\"roomBan\" style=\"width:100px;margin-right:10px;\" placeholder=\"请选择\" size=\"small\">\r\n            <el-option\r\n              v-for=\"item in options\"\r\n              :key=\"item.key\"\r\n              :label=\"item.value\"\r\n              :value=\"item.key\">\r\n            </el-option>\r\n          </el-select>\r\n          <el-button type=\"primary\" size=\"mini\" @click.stop=\"handleBan(roomBan, 0)\">确定</el-button>\r\n        </div>\r\n        <div class=\"ban-btn\" v-if=\"userInfo.channelRoleType===9\">\r\n          全站禁言：\r\n          <el-select v-model=\"allBan\" style=\"width:100px;margin-right:10px;\" placeholder=\"请选择\" size=\"small\">\r\n            <el-option\r\n              v-for=\"item in options\"\r\n              :key=\"item.key\"\r\n              :label=\"item.value\"\r\n              :value=\"item.key\">\r\n            </el-option>\r\n          </el-select>\r\n          <el-button type=\"primary\" size=\"mini\" @click.stop=\"handleBan(allBan, 1)\">确定</el-button>\r\n        </div>\r\n<!--        <div class=\"ban-btn\" v-if=\"userInfo.channelRoleType===9\" @click.stop=\"handleBan(4)\">全站永久禁言</div>-->\r\n        <div class=\"ban-btn\" v-if=\"userInfo.channelRoleType===2\" @click.stop=\"handleSetManager(0)\">设为房管</div>\r\n      </div>\r\n    </transition>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\n  /*\r\n  * 主播和房管无法禁言已被禁言的人，提示”该用户已被禁言\r\n  * 超管可再次禁言已被禁言的用户，效果为覆盖之前的禁言时间\r\n  * 禁言后输入框部分显示禁言时间，且无法输入文字。\r\n  * */\r\n\r\n  import { forbidUser, setManager } from '@/api/liveroom';\r\n  import { throttle } from \"@/utils/debounceAndthrottle\";\r\n  import { Select, Option, Button } from 'element-ui';\r\n\r\n  export default {\r\n    name: 'LiveroomBan',\r\n    props: {\r\n      userInfo: Object, // channelRoleType 0(普通用户), 1(房管), 2(主播), 9(超管)\r\n    },\r\n    components: {\r\n      [Select.name]: Select,\r\n      [Option.name]: Option,\r\n      [Button.name]: Button,\r\n    },\r\n    data() {\r\n      return {\r\n        options: [\r\n          {\r\n            key: 5,\r\n            value: \"10分钟\"\r\n          },\r\n          {\r\n            key: 6,\r\n            value: \"30分钟\"\r\n          },\r\n          {\r\n            key: 7,\r\n            value: \"1小时\"\r\n          },\r\n          {\r\n            key: 1,\r\n            value: \"24小时\"\r\n          },\r\n          {\r\n            key: 8,\r\n            value: \"3天\"\r\n          },\r\n          {\r\n            key: 2,\r\n            value: \"7天\"\r\n          },\r\n          {\r\n            key: 3,\r\n            value: \"30天\"\r\n          },\r\n          {\r\n            key: 9,\r\n            value: \"6个月\"\r\n          },\r\n          {\r\n            key: 4,\r\n            value: \"永久\"\r\n          }], // 禁言类型: 0 取消禁言; 5:10分钟, 6:30分钟, 7:1小时, 1:24小时, 8:3天, 2:7天, 3:30天, 9:6个月, 4:永久(20年)\r\n        sending: false,\r\n        banDialog: false,\r\n        roomBan: \"\",\r\n        allBan: \"\",\r\n        banList: [{  // 0 取消禁言; 5:10分钟, 6:30分钟, 7:1小时, 1:24小时, 8:3天, 2:7天, 3:30天, 9:6个月, 4:永久(20年)\r\n          value: 1,\r\n          title: '禁言24小时'\r\n        }, {\r\n          value: 2,\r\n          title: '禁言7天'\r\n        }, {\r\n          value: 3,\r\n          title: '禁言30天'\r\n        }],\r\n        banUserInfo: {}\r\n      }\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n      show(item) {\r\n        // 权限不足 ( 未使用当前用户被禁言 || this.userInfo.forbid)\r\n        if (this.userInfo.channelRoleType === 0) return;\r\n        this.roomBan = \"\";\r\n        this.allBan = \"\";\r\n\r\n        this.banDialog = true;\r\n        this.banUserInfo = item;\r\n        console.log(item);\r\n      },\r\n      handleBan: throttle(function (value, forbidRoomType) {\r\n        console.log(value, 'ban');\r\n        if(!value) {\r\n          return this.Message.error({\r\n            message: \"请选择禁言天数\",\r\n          })\r\n        }\r\n        this.sending = true;\r\n        return forbidUser({\r\n          beForbidUid: this.banUserInfo._lcattrs.user.id,\r\n          channelId: this.$route.params.liveroom,\r\n          forbidType: value,\r\n          forbidRoomType: forbidRoomType\r\n        }).then(res => {\r\n          console.log(res);\r\n          this.banDialog = false;\r\n          this.Message.success({\r\n            message: res.msg,\r\n          })\r\n          this.sending = false;\r\n          this.roomBan = \"\";\r\n          this.allBan = \"\";\r\n        }).catch(res => {\r\n          if (res.data.msg) this.Message.error({\r\n            message: res.data.msg,\r\n          })\r\n          this.sending = false;\r\n          console.log(res);\r\n        })\r\n      }, 1000),\r\n      handleSetManager: throttle(function (value) {\r\n        console.log(value, 'ban');\r\n        this.sending = true;\r\n        return setManager({\r\n          operator: value, // 操作:0 添加; 1 删除\r\n          uid: this.banUserInfo._lcattrs.user.id\r\n        }).then(res => {\r\n          this.banDialog = false;\r\n          this.Message.success({\r\n            message: res.msg,\r\n          })\r\n          this.sending = false;\r\n        }).catch(res => {\r\n          if (res.data.msg) this.Message.error({\r\n            message: res.data.msg,\r\n          })\r\n          this.sending = false;\r\n        })\r\n      }, 1000),\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  @import \"@/assets/css/_index.scss\";\r\n\r\n  .ban-mask {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 29;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: transparent;\r\n  }\r\n\r\n  .ban-wrap {\r\n    position: absolute;\r\n    top: 54px;\r\n    left: 50px;\r\n    z-index: 30;\r\n    width: 260px;\r\n    background: rgba(255, 255, 255, 1);\r\n    box-shadow: 0px 2px 16px 0px rgba(30, 32, 39, 0.11);\r\n    border-radius: 10px;\r\n    text-align: center;\r\n\r\n    .ban-btns {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n    }\r\n\r\n    .ban-logo {\r\n      margin-top: 15px;\r\n      margin-bottom: 8px;\r\n      width: 70px;\r\n      height: 70px;\r\n      border-radius: 50%;\r\n    }\r\n\r\n    .ban-name {\r\n      margin: 0;\r\n      font-size: 14px;\r\n      color: $color-title1;\r\n      @extend .bold;\r\n    }\r\n\r\n    .ban-uid {\r\n      margin-top: 7px;\r\n      margin-bottom: 7px;\r\n      font-size: 12px;\r\n      color: $color-title3;\r\n    }\r\n\r\n    .ban-btn {\r\n      margin: 0 12px;\r\n      height: 55px;\r\n      line-height: 55px;\r\n      font-size: 12px;\r\n      color: $color-main;\r\n      cursor: pointer;\r\n      border-bottom: 1px solid #F4F4F4;\r\n\r\n      &:nth-last-child(1) {\r\n        border-bottom: 0;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}